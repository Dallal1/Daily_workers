/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/base/util/merge","sap/ui/model/json/JSONModel","sap/base/util/deepClone"],function(e,t,r,a){"use strict";var n={layers:{admin:0,content:5,translation:10,all:20},mergeManifestPathChanges:function(e,t){Object.keys(t).forEach(function(r){if(r.charAt(0)==="/"){var a=t[r];e.setProperty(r,a)}})},mergeTextsChanges:function(t,r,a){var i=e.getLanguage().replaceAll("_","-");if(r&&r.hasOwnProperty(i)){var s=r[i];for(var o in s){var f=s[o];if(typeof f==="object"){n.translateObject(t,o,f,a)}else{var l=t.getProperty(o);var c=true;if(l&&typeof l==="string"&&(l.indexOf("{context>")===0||l.indexOf("{{parameters")===0)){c=false}if(c){t.setProperty(o,f)}}}}},mergeCardDelta:function(a,i,s){var o=t({},a);if(typeof s==="undefined"){s="sap.card"}if(Array.isArray(i)&&i.length>0){var f,l,c;i.forEach(function(a){if(a.content){t(o[s],a.content)}else{var i=a.hasOwnProperty(":layer")?a[":layer"]:1e3;if(i===n.layers["translation"]){var u=e.getLanguage().replaceAll("_","-");var p={texts:{}};p.texts[u]={};delete a.texts;Object.keys(a).forEach(function(e){if(e.charAt(0)==="/"){p.texts[u][e]=a[e]}else{p[e]=a[e]}});a=p}l=t(l,a.texts);c=t(c,a[":designtime"]);f=f||new r(o);n.mergeManifestPathChanges(f,a)}});n.mergeTextsChanges(f,l,c)}return o},mergeCardDesigntimeMetadata:function(e,r){var a=t({},e);r.forEach(function(e){var t=e.content.entityPropertyChange||[];t.forEach(function(e){var t=e.propertyPath;switch(e.operation){case"UPDATE":if(a.hasOwnProperty(t)){a[t]=e.propertyValue}break;case"DELETE":delete a[t];break;case"INSERT":if(!a.hasOwnProperty(t)){a[t]=e.propertyValue}break;default:break}})});return a},translateObject:function(e,r,n,i){var s=e.getProperty(r);if(!s||typeof s!=="object"){return}s=a(s,500);if(!Array.isArray(s)){var o=(s._dt||{})._uuid;if(o&&n[o]){if(i&&i[r]&&i[r][o]){for(var f in i[r][o]){if(i[r][o][f].translatable===false){delete n[o][f]}}}t(s,n[o]);e.setProperty(r,s)}}else{s.forEach(function(e){var a=(e._dt||{})._uuid;if(a&&n[a]){if(i&&i[r]&&i[r][a]){for(var s in i[r][a]){if(i[r][a][s].translatable===false){delete n[a][s]}}}t(e,n[a])}});e.setProperty(r,s);return}}};return n});
//# sourceMappingURL=CardMerger.js.map