/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/ui/Device","sap/ui/core/Control","sap/ui/core/ControlBehavior","sap/ui/core/Element","sap/ui/core/util/PasteHelper","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/BindingMode","./Column","./Row","./library","./utils/TableUtils","./extensions/ExtensionBase","./extensions/Accessibility","./extensions/Keyboard","./extensions/Pointer","./extensions/Scrolling","./extensions/DragAndDrop","./TableRenderer","./rowmodes/Type","./rowmodes/Fixed","./rowmodes/Interactive","./rowmodes/Auto","./plugins/SelectionModelSelection","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/AnimationMode","sap/ui/core/library"],function(e,t,i,o,n,r,s,a,l,u,d,p,h,g,c,f,m,y,w,b,v,C,R,_,x,S,jQuery,T,A,I){"use strict";var B=h.GroupEventType;var M=h.SelectionMode;var F=h.SelectionBehavior;var D=I.SortOrder;var P=g.Hook.Keys.Table;var E=g.createWeakMapFacade();var V=i.extend("sap.ui.table.Table",{metadata:{library:"sap.ui.table",dnd:true,properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},rowHeight:{type:"int",group:"Appearance",defaultValue:null,deprecated:true},columnHeaderHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderVisible:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCount:{type:"int",group:"Appearance",defaultValue:10,deprecated:true},firstVisibleRow:{type:"int",group:"Appearance",defaultValue:0},selectionMode:{type:"sap.ui.table.SelectionMode",group:"Behavior",defaultValue:M.MultiToggle},selectionBehavior:{type:"sap.ui.table.SelectionBehavior",group:"Behavior",defaultValue:F.RowSelector},selectedIndex:{type:"int",group:"Appearance",defaultValue:-1,deprecated:true},editable:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},navigationMode:{type:"sap.ui.table.NavigationMode",group:"Behavior",defaultValue:"Scrollbar",deprecated:true},threshold:{type:"int",group:"Appearance",defaultValue:100},enableColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true},enableGrouping:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},showColumnVisibilityMenu:{type:"boolean",group:"Appearance",defaultValue:false},showNoData:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCountMode:{type:"sap.ui.table.VisibleRowCountMode",group:"Appearance",defaultValue:"Fixed",deprecated:true},minAutoRowCount:{type:"int",group:"Appearance",defaultValue:5,deprecated:true},fixedColumnCount:{type:"int",group:"Appearance",defaultValue:0},fixedRowCount:{type:"int",group:"Appearance",defaultValue:0,deprecated:true},fixedBottomRowCount:{type:"int",group:"Appearance",defaultValue:0,deprecated:true},enableColumnFreeze:{type:"boolean",group:"Behavior",defaultValue:false},enableCellFilter:{type:"boolean",group:"Behavior",defaultValue:false},showOverlay:{type:"boolean",group:"Appearance",defaultValue:false},enableSelectAll:{type:"boolean",group:"Behavior",defaultValue:true},enableCustomFilter:{type:"boolean",group:"Behavior",defaultValue:false},enableBusyIndicator:{type:"boolean",group:"Behavior",defaultValue:false},rowActionCount:{type:"int",group:"Appearance",defaultValue:0},alternateRowColors:{type:"boolean",group:"Appearance",defaultValue:false},rowCountConstraints:{type:"object",visibility:"hidden"}},defaultAggregation:"columns",aggregations:{title:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false,deprecated:true},footer:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false,deprecated:true},extension:{type:"sap.ui.core.Control",multiple:true,singularName:"extension"},columns:{type:"sap.ui.table.Column",defaultClass:d,multiple:true,singularName:"column",bindable:"bindable",dnd:{layout:"Horizontal"}},rows:{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable",selector:"#{id}-tableCCnt",dnd:true},rowMode:{type:"sap.ui.table.rowmodes.RowMode",multiple:false,altTypes:["sap.ui.table.rowmodes.Type"]},creationRow:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},_noColumnsMessage:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},rowActionTemplate:{type:"sap.ui.table.RowAction",multiple:false},rowSettingsTemplate:{type:"sap.ui.table.RowSettings",multiple:false},contextMenu:{type:"sap.ui.core.IContextMenu",multiple:false},plugins:{type:"sap.ui.table.plugins.SelectionPlugin",multiple:true,singularName:"plugin",deprecated:true},_messageStrip:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_hiddenDependents:{type:"sap.ui.core.Element",multiple:true,visibility:"hidden"}},associations:{groupBy:{type:"sap.ui.table.Column",multiple:false,deprecated:true},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{rowSelectionChange:{parameters:{rowIndex:{type:"int"},rowContext:{type:"sap.ui.model.Context"},rowIndices:{type:"int[]"},selectAll:{type:"boolean"},userInteraction:{type:"boolean"}}},columnSelect:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnResize:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},width:{type:"sap.ui.core.CSSSize"}}},columnMove:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newPos:{type:"int"}}},sort:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},sortOrder:{type:"sap.ui.core.SortOrder"},columnAdded:{type:"boolean"}}},filter:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},group:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}},deprecated:true},columnVisibility:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newVisible:{type:"boolean"}}},cellClick:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}}},cellContextmenu:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}},deprecated:true},beforeOpenContextMenu:{allowPreventDefault:true,parameters:{rowIndex:{type:"int"},columnIndex:{type:"int"},contextMenu:{type:"sap.ui.core.IContextMenu"}}},columnFreeze:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},customFilter:{parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},firstVisibleRowChanged:{parameters:{firstVisibleRow:{type:"int"}}},busyStateChanged:{parameters:{busy:{type:"boolean"}}},paste:{allowPreventDefault:true,parameters:{data:{type:"string[][]"}}},rowsUpdated:{}},designtime:"sap/ui/table/designtime/Table.designtime"},renderer:v});V.prototype.init=function(){this.mSkipPropagation={rowActionTemplate:true,rowSettingsTemplate:true};E(this).iCachedBindingLength=0;E(this).iFirstRenderedRowIndex=0;E(this).iComputedFixedColumnCount=null;this._attachExtensions();this._bRtlMode=e.getRTL();this._bRowsBeingBound=false;this._bContextsAvailable=false;this._aRowClones=[];this._bRowAggregationInvalid=true;this._mTimeouts={};this._mAnimationFrames={};this._aRowHeights=[];this._aSortedColumns=[];this._aTableHeaders=[];this._bAllowColumnHeaderTextSelection=false;E(this).iPendingRequests=0;this._iBindingLength=null;this._bFirstRendering=true;this._nDevicePixelRatio=window.devicePixelRatio;if(g.isThemeApplied()){g.readThemeParameters()}this._bInvalid=true};V.prototype.applySettings=function(e,t){if(e){var o=["threshold","firstVisibleRow","rowMode"];var n={};o.push("plugins");for(var r=0;r<o.length;r++){var s=o[r];if(s in e){n[s]=e[s];delete e[s]}}if(Object.keys(n).length>0){i.prototype.applySettings.call(this,n,t)}}this._initLegacySelectionPlugin();z(this);i.prototype.applySettings.call(this,e,t)};V.prototype._attachExtensions=function(){if(this._bExtensionsInitialized){return}c.enrich(this,y);c.enrich(this,w);c.enrich(this,m);c.enrich(this,f);c.enrich(this,b);if(t.os.ios){sap.ui.require(["sap/ui/table/extensions/ScrollingIOS"],function(e){if(!this.bIsDestroyed){c.enrich(this,e)}}.bind(this))}this._bExtensionsInitialized=true};V.prototype.exit=function(){this.invalidateRowsAggregation();this._detachExtensions();this._cleanUpTimers();this._detachEvents();g.Menu.cleanupDefaultContentCellContextMenu(this);J(this);delete this._aTableHeaders};V.prototype._detachExtensions=function(){c.cleanup(this)};V.prototype.onpaste=function(e){if(e.isMarked()||/^(input|textarea)$/i.test(e.target.tagName)||!this.getDomRef("sapUiTableCnt").contains(e.target)){return}var t=r.getPastedDataAs2DArray(e.originalEvent);if(t.length===0||t[0].length===0){return}this.firePaste({data:t})};V.prototype.onThemeChanged=function(){g.readThemeParameters();if(this.getDomRef()){this.invalidate()}};V.prototype.onLocalizationChanged=function(e){var t=e.changes||{};var i=t.hasOwnProperty("rtl");var o=t.hasOwnProperty("language");this._adaptLocalization(i,o).then(function(){this.invalidate()}.bind(this)).catch(function(){})};V.prototype.onlocalizationChanged=V.prototype.onLocalizationChanged;V.prototype._adaptLocalization=function(t,i){if(!t&&!i){return Promise.reject()}var o=Promise.resolve();if(t){this._bRtlMode=e.getRTL()}if(i){o=g.getResourceBundle({async:true,reload:true})}return o.then(function(){if(i){g.Menu.cleanupDefaultContentCellContextMenu(this);this._invalidateColumnMenus()}}.bind(this))};V.prototype._collectRowHeights=function(e){var i=this.getDomRef();if(!i){return[]}var o=this._getBaseRowHeight();var n=e?".sapUiTableColHdrTr":".sapUiTableTr";var r=i.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+n);var s=i.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+n);var a=e?g.getHeaderRowCount(this):this.getRows().length;var l=[];var u=t.browser.chrome&&window.devicePixelRatio!=1;if(e){if(this.getColumnHeaderHeight()>0){o=this.getColumnHeaderHeight()}else if(this.getRowMode()){o=this._getDefaultRowHeight()}}for(var d=0;d<a;d++){var p=r[d]?r[d].getBoundingClientRect().height:0;var h=s[d]?s[d].getBoundingClientRect().height:0;var c=Math.max(p,h);if(u){var f=o-c;if(f>0&&f<1){l.push(Math.max(c,o-1));continue}}l.push(Math.max(c,o))}if(l.length>0&&!e){g.dynamicCall(this._getSyncExtension,function(e){var t=e.syncRowHeights(l.slice());if(t&&t.length===l.length){l=t.slice()}})}return l};V.prototype._resetRowHeights=function(){var e=this._getBaseRowHeight();var t="";if(e){t=e+"px"}var i=this.getDomRef("tableCCnt");if(i){var o=i.querySelectorAll(".sapUiTableTr");for(var n=0;n<o.length;n++){o[n].style.height=t}}};V.prototype._resetColumnHeaderHeights=function(){var e=this.getDomRef();if(e){var t=e.querySelectorAll(".sapUiTableColHdrTr");for(var i=0;i<t.length;i++){t[i].style.height=null}}};V.prototype._collectTableSizes=function(){var e={tableCtrlScrollWidth:0,tableRowHdrScrWidth:0,tableCtrlScrWidth:0,tableCtrlFixedWidth:0,tableCntHeight:0,tableCntWidth:0};var t=this.getDomRef();if(!t){return e}var i=t.querySelector(".sapUiTableCnt");if(i){e.tableCntHeight=i.clientHeight;e.tableCntWidth=i.clientWidth}var o=t.querySelector(".sapUiTableCtrlScroll:not(.sapUiTableCHT)");if(o){e.tableCtrlScrollWidth=o.getBoundingClientRect().width}var n=t.querySelector(".sapUiTableRowHdrScr");if(n){e.tableRowHdrScrWidth=n.clientWidth}var r=t.querySelector(".sapUiTableCtrlScr:not(.sapUiTableCHA)");if(r){e.tableCtrlScrWidth=r.getBoundingClientRect().width}var s=t.querySelector(".sapUiTableCtrlScrFixed:not(.sapUiTableCHA) > .sapUiTableCtrlFixed");if(s){e.tableCtrlFixedWidth=s.clientWidth}var a=this._getSpanBasedComputedFixedColumnCount();var l=0;if(a){var u=this.getColumns();var d=t.querySelectorAll(".sapUiTableCtrlFirstCol:not(.sapUiTableCHTHR) > th");for(var p=0;p<d.length;p++){var h=parseInt(d[p].getAttribute("data-sap-ui-headcolindex"));if(!isNaN(h)&&h<a){var c=u[h];var f;if(c._iFixWidth!=null){f=c._iFixWidth}else{f=d[p].getBoundingClientRect().width}l+=f}}}if(l>0){var m=this._getScrollExtension();var y=e.tableRowHdrScrWidth;var w=m.getVerticalScrollbar();if(w&&!m.isVerticalScrollbarExternal()){y+=w.offsetWidth}if(g.hasRowActions(this)){var b=this.getDomRef("sapUiTableRowActionScr");if(b){y+=b.offsetWidth}}y+=g.Column.getMinColumnWidth();var v=e.tableCntWidth-y;var C=v>l;var R=!C;if(this._bIgnoreFixedColumnCount!==R){this._bIgnoreFixedColumnCount=R;if(this.getEnableColumnFreeze()){this._invalidateColumnMenus()}this.invalidate()}}return e};V.prototype._updateRowHeights=function(e,t){var i=this.getDomRef();if(!i){return}function o(t,i){var o=e[i];if(o){t.style.height=o+"px"}}var n=t?".sapUiTableColHdrTr":".sapUiTableTr";var r=t?[]:i.querySelectorAll(".sapUiTableRowSelectionCell");var s=t?[]:i.querySelectorAll(".sapUiTableRowActionCell");var a=i.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+n);var l=i.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+n);Array.prototype.forEach.call(r,o);Array.prototype.forEach.call(s,o);Array.prototype.forEach.call(a,o);Array.prototype.forEach.call(l,o)};V.prototype.onBeforeRendering=function(e){this._bInvalid=true;this._detachEvents();if(e&&e.isMarked("renderRows")){return}this._cleanUpTimers();this._aTableHeaders=[]};V.prototype.onAfterRendering=function(e){var t=e&&e.isMarked("renderRows");this._bInvalid=false;this._attachEvents();this._initRowDomRefs();if(!this._bAllowColumnHeaderTextSelection&&!t){this._disableTextSelection(this.$().find(".sapUiTableColHdrCnt"))}this.getDomRef().classList.remove("sapUiTableRActFlexible");if(!t){this._aTableHeaders=this.$().find(".sapUiTableColHdrCnt th")}this._updateTableSizes(g.RowsUpdateReason.Render,true);g.registerResizeHandler(this,"Table",this._onTableResize.bind(this));this._bFirstRendering=false};V.prototype.invalidate=function(){this._bInvalid=true;g.Column.invalidateColumnUtils(this);return i.prototype.invalidate.call(this)};V.prototype._initRowDomRefs=function(){var e=this.getRows();for(var t=0;t<e.length;t++){e[t].initDomRefs()}};V.prototype._updateTableSizes=function(e,t){t=t===true;var i=this.getDomRef();if(this._bInvalid||!i||!g.isThemeApplied()||i.offsetWidth===0){return}if(!t){this._resetRowHeights();this._resetColumnHeaderHeights()}this._aRowHeights=this._collectRowHeights(false);var o=this._collectRowHeights(true);function n(e){var t=e.getDomRef();var i=g.Column.getMinColumnWidth();var o=[];var n=e.getColumnHeaderVisible();function r(e,t){if(e<=t){return Math.max(e,t-5,i)+"px"}return-1}function s(s){var a=Math.max(s._minWidth||0,i,s.getMinWidth());var l=s.getWidth();var u;var d;var p;if(g.isVariableWidth(l)&&!g.isFixedColumn(e,s.getIndex())){u=t.querySelectorAll('th[data-sap-ui-colid="'+s.getId()+'"]');d=u[n?0:1];p=d?d.offsetWidth:null;if(p!==null){if(p<=a){return{headers:u,newWidth:r(p,a)}}else if(d&&d.style.width!=l){o.push({col:s,header:d,minWidth:a,headers:u});return{headers:u,newWidth:l}}o.push({col:s,header:d,minWidth:a,headers:u})}}return null}function a(e){if(e){Array.prototype.forEach.call(e.headers,function(t){t.style.width=e.newWidth})}}e._getVisibleColumns().map(s).forEach(a);if(o.length){var l;for(var u=0;u<o.length;u++){l=o[u].header&&o[u].header.offsetWidth;o[u].newWidth=r(l,o[u].minWidth);if(parseInt(o[u].newWidth)>=0){a(o[u])}}}}n(this);var r=this._collectTableSizes();this._updateRowHeights(this._aRowHeights,false);this._updateRowHeights(o,true);g.dynamicCall(this._getSyncExtension,function(e){e.syncLayout({top:this.getDomRef("sapUiTableCnt").offsetTop,headerHeight:this.getDomRef().querySelector(".sapUiTableColHdrCnt").getBoundingClientRect().height,contentHeight:this.getDomRef("tableCCnt").getBoundingClientRect().height})},this);var s=this.$();if(g.hasRowActions(this)||g.hasRowNavigationIndicators(this)){var a=s.hasClass("sapUiTableRActFlexible");var l=this.getDomRef("dummycolhdr");if(l){var u=l.clientWidth>1;if(!a&&u){var d=this.getColumns().reduce(function(e,t){var i=t.getDomRef();if(i&&t.getIndex()>=this.getComputedFixedColumnCount()){e+=i.offsetWidth}return e}.bind(this),0);var p=d+r.tableRowHdrScrWidth+r.tableCtrlFixedWidth;var h={};if(!g.hasRowActions(this)){p=p-g.ThemeParameters.navIndicatorWidth+g.BaseBorderWidth}h[this._bRtlMode?"right":"left"]=p;this.$("sapUiTableRowActionScr").css(h);this.$("rowacthdr").css(h);s.toggleClass("sapUiTableRActFlexible",true)}else if(a&&!u){this.$("sapUiTableRowActionScr").removeAttr("style");this.$("rowacthdr").removeAttr("style");s.toggleClass("sapUiTableRActFlexible",false)}}}s.find(".sapUiTableNoOpacity").addBack().removeClass("sapUiTableNoOpacity");g.Hook.call(this,P.UpdateSizes,e)};V.prototype.setShowOverlay=function(e){this.setProperty("showOverlay",e,true);if(this.getDomRef()){this.$().toggleClass("sapUiTableOverlay",this.getShowOverlay());this._getAccExtension().updateAriaStateForOverlayAndNoData();this._getKeyboardExtension().updateNoDataAndOverlayFocus()}return this};V.prototype._updateFixedBottomRows=function(){var e=this.getDomRef();if(!e||this._getRowCounts().fixedBottom===0){return}var t=g.getFirstFixedBottomRowIndex(this);var i=this.getRows();var o;jQuery(e).find(".sapUiTableRowLastScrollable").removeClass("sapUiTableRowLastScrollable");jQuery(e).find(".sapUiTableRowFirstFixedBottom").removeClass("sapUiTableRowFirstFixedBottom");if(t>=0&&t<i.length){o=i[t].getDomRefs(true);o.row.addClass("sapUiTableRowFirstFixedBottom",true)}if(t>=1&&t<i.length){o=i[t-1].getDomRefs(true);o.row.addClass("sapUiTableRowLastScrollable",true)}};V.prototype.focus=function(e){this._oFocusInfo=e;i.prototype.focus.apply(this,arguments);delete this._oFocusInfo};V.prototype.getFocusInfo=function(){var e=this.$().find(":focus").attr("id");if(e){return{customId:e}}else{return i.prototype.getFocusInfo.apply(this,arguments)}};V.prototype.applyFocusInfo=function(e){delete this._bApplyFocusInfoFailed;if(e&&e.customId){if(document.getElementById(e.customId)){jQuery(document.getElementById(e.customId)).trigger("focus")}else{this._bApplyFocusInfoFailed=true}}else{i.prototype.applyFocusInfo.apply(this,arguments)}return this};V.prototype.setTitle=function(e){var t=e;if(typeof e==="string"||e instanceof String){t=g._getTableTemplateHelper().createTextView({text:e});t.addStyleClass("sapUiTableHdrTitle")}this.setAggregation("title",t);return this};V.prototype.setFooter=function(e){var t=e;if(typeof e==="string"||e instanceof String){t=g._getTableTemplateHelper().createTextView({text:e})}this.setAggregation("footer",t);return this};V.prototype.setSelectionMode=function(e){if(e===M.Multi){e=M.MultiToggle;T.warning("The selection mode 'Multi' is deprecated and must not be used anymore."+" Your setting was defaulted to selection mode 'MultiToggle'",this)}if(this._hasSelectionPlugin()){T.error("If a selection plugin is applied to the table, the selection mode is controlled by the plugin.",this)}else{this.setProperty("selectionMode",e);this._getSelectionPlugin().setSelectionMode(e)}return this};V.prototype.setFirstVisibleRow=function(e){if(e==null){e=0}else if(e<0){T.error("The index of the first visible row must be greater than or equal to 0. The value has been set to 0.",this);e=0}else if(this._bContextsAvailable){var t=this._getMaxFirstVisibleRowIndex();if(t<e){T.warning("The index of the first visible row is too high. The value has been set to "+t+".",this);e=t}}this._setFirstVisibleRowIndex(e);return this};V.prototype._setFirstVisibleRowIndex=function(e,t){t=Object.assign({onScroll:false,suppressScrolling:false,suppressEvent:false,forceEvent:false,suppressRendering:false,onlySetProperty:false},t);if(this._bContextsAvailable){e=Math.min(e,this._getMaxFirstVisibleRowIndex())}e=Math.max(0,e);var i=this.getFirstVisibleRow()!==e;var o=this._getFirstRenderedRowIndex();var n=this._bContextsAvailable?Math.min(e,this._getMaxFirstRenderedRowIndex()):e;var r=this._getScrollExtension();this.setProperty("firstVisibleRow",e,true);if(!t.suppressRendering){E(this).iFirstRenderedRowIndex=n}if(t.onlySetProperty){return false}if((i||t.forceEvent)&&!t.suppressEvent){this.fireFirstVisibleRowChanged({firstVisibleRow:e})}if(!this.getBinding()){r.updateVerticalScrollPosition();return false}var s=false;var a=this.getBinding()!=null&&n!==o;if(a){if(!t.suppressRendering){G(this,t.onScroll?g.RowsUpdateReason.VerticalScroll:g.RowsUpdateReason.FirstVisibleRowChange);s=true}if(!t.onScroll&&!t.suppressScrolling){r.updateVerticalScrollPosition(s)}}else if(!t.onScroll&&!t.suppressScrolling){r.updateVerticalScrollPosition(!this._bContextsAvailable)}return s};V.prototype._setFocus=function(e,t){return new Promise(function(i){if(e===-1){e=this._getTotalRowCount()-1}if(typeof e!=="number"||e<-1){e=0}var o=this.getFirstVisibleRow();var n=this._getRowCounts().count;if(e>o&&e<o+n){this.getRows()[e-o]._setFocus(t);return i()}if(this._setFirstVisibleRowIndex(e)){this.attachEventOnce("_rowsUpdated",function(){U(this,e,t);return i()})}else{U(this,e,t);return i()}}.bind(this))};function U(e,t,i){var o=e._getTotalRowCount();var n=e._getFirstRenderedRowIndex();e.getRows()[Math.min(t,o-1)-n]._setFocus(i)}V.getMetadata().getAggregation("rows")._doesNotRequireFactory=true;V.prototype.bindAggregation=function(e,t){if(e==="rows"){this._bindRows(L(Array.prototype.slice.call(arguments,1)));return this}return i.prototype.bindAggregation.apply(this,arguments)};V.prototype.bindRows=function(e){this._bindRows(L(arguments));return this};V.prototype._bindRows=function(e){H(this);this._bRowsBeingBound=true;k(this);Y(this);V._addBindingListener(e,"change",function(){this._onBindingChange.apply(this,arguments)}.bind(this));V._addBindingListener(e,"dataRequested",function(){this._onBindingDataRequested.apply(this,arguments)}.bind(this));V._addBindingListener(e,"dataReceived",function(){this._onBindingDataReceived.apply(this,arguments)}.bind(this));g.Hook.call(this,P.BindRows,e);i.prototype.bindAggregation.call(this,"rows",e);this._bRowsBeingBound=false};V.prototype._bindAggregation=function(e,t){if(e==="rows"){H(this);this._bRowsBeingBound=true}i.prototype._bindAggregation.call(this,e,t);if(e==="rows"){g.Grouping.setupExperimentalGrouping(this);var o=this.getBinding();var n=o?o.getModel():null;this._bRowsBeingBound=false;g.Hook.call(this,P.RowsBound,o);if(n&&n.getDefaultBindingMode()===u.OneTime){T.error('The binding mode of the model is set to "OneTime".'+' This binding mode is not supported for the "rows" aggregation!'+" Scrolling can not be performed.",this)}}};V.prototype.unbindAggregation=function(e,t){if(e==="rows"){this._unbindRows();return this}return i.prototype.unbindAggregation.apply(this,arguments)};V.prototype.unbindRows=function(){this._unbindRows();return this};V.prototype._unbindRows=function(){var e=this.getBindingInfo("rows");if(e){g.Hook.call(this,P.UnbindRows,e)}i.prototype.unbindAggregation.call(this,"rows",true);if(this._bRowsBeingBound||this.bIsDestroyed||this._bIsBeingDestroyed){return}this._adjustToTotalRowCount();if(e){g.Hook.call(this,P.RowsUnbound)}H(this);Y(this)};function H(e){e._bRowsBeingBound=false;e._bContextsAvailable=false;E(e).iPendingRequests=0;e._iBindingLength=null}function L(e){var t;if(e==null||e[0]==null){t={}}else if(typeof e[0]==="string"){var i=e[0];var o=e[1];var n=e[2];var r=e[3];if(o instanceof l||Array.isArray(n)&&n[0]instanceof a){r=n;n=o;o=undefined}t={path:i,sorter:n,filters:r,template:o}}else{t=e[0]}return t}V._addBindingListener=function(e,t,i,o){if(!e.events){e.events={}}var n=e.events[t];e.events[t]=function(){i.apply(o,arguments);if(n){n.apply(this,arguments)}}};V.prototype._onBindingChange=function(e){};V.prototype.setRowMode=function(e){O(this);this.setAggregation("rowMode",e);z(this);return this};V.prototype.destroyRowMode=function(){this.destroyAggregation("rowMode");if(!E(this).oDefaultRowMode){z(this)}return this};function W(e){var t=e.getRowMode();if(!e.isDestroyStarted()&&!g.isA(t,"sap.ui.table.rowmodes.RowMode")&&!E(e).oDefaultRowMode){z(e)}return g.isA(t,"sap.ui.table.rowmodes.RowMode")?t:E(e).oDefaultRowMode}function z(e){const t=e.getRowMode();const i=g.isA(t,"sap.ui.table.rowmodes.RowMode")?undefined:t||C.Fixed;if(i===undefined||E(e).oDefaultRowMode){return}if(t===null){switch(e.getVisibleRowCountMode()){case C.Fixed:E(e).oDefaultRowMode=new R(true);break;case C.Interactive:E(e).oDefaultRowMode=new _(true);break;case C.Auto:E(e).oDefaultRowMode=new x(true);break;default:throw new Error("Default row mode could not be created")}e.addAggregation("_hiddenDependents",E(e).oDefaultRowMode);return}switch(i){case C.Fixed:E(e).oDefaultRowMode=new R;break;case C.Interactive:E(e).oDefaultRowMode=new _;break;case C.Auto:E(e).oDefaultRowMode=new x;break;default:throw new Error("Default row mode could not be created")}e.addAggregation("_hiddenDependents",E(e).oDefaultRowMode)}function O(e){if(E(e).oDefaultRowMode){E(e).oDefaultRowMode.destroy();delete E(e).oDefaultRowMode}}V.prototype._getRowCounts=function(){var e=W(this).getComputedRowCounts();var t=this._bVariableRowHeightEnabled&&!e.fixedTop&&!e.fixedBottom;e._fullsize=e.count;e._scrollSize=e.scrollable;if(e.count>0&&t){e.count++;e.scrollable++}return e};V.prototype._isNoDataDisabled=function(){return!this.getShowNoData()||(W(this)?.isNoDataDisabled()??false)};V.prototype.setVisibleRowCountMode=function(e){if(this.getRowMode()){T.warning('If the "rowMode" aggregation is set, setting the "visibleRowCountMode" has no effect');return this.setProperty("visibleRowCountMode",e,true)}var t=this.getVisibleRowCountMode();this.setProperty("visibleRowCountMode",e);var i=this.getVisibleRowCountMode();if(i!==t){O(this);z(this)}return this};V.prototype.setVisibleRowCount=function(e){var t=this.getVisibleRowCountMode();if(t=="Auto"){T.error("VisibleRowCount will be ignored since VisibleRowCountMode is set to Auto",this);return this}if(e!=null&&!isFinite(e)){return this}var i=this.getFixedRowCount()+this.getFixedBottomRowCount();if(e<=i&&i>0){T.error("Table: "+this.getId()+" visibleRowCount('"+e+"') must be bigger than number of"+" fixed rows('"+(this.getFixedRowCount()+this.getFixedBottomRowCount())+"')",this);return this}if(this.getRowMode()){T.warning('If the "rowMode" aggregation is set, setting the "visibleRowCount" has no effect');return this.setProperty("visibleRowCount",e,true)}e=this.validateProperty("visibleRowCount",e);this.setProperty("visibleRowCount",e);g.dynamicCall(this._getSyncExtension,function(t){t.syncRowCount(e)});return this};V.prototype.setMinAutoRowCount=function(e){if(parseInt(e)<1){T.error("The minAutoRowCount property must be greater than 0. The value has been set to 1.",this);e=1}if(this.getRowMode()){T.warning('If the "rowMode" aggregation is set, setting the "minAutoRowCount" has no effect');return this.setProperty("minAutoRowCount",e,true)}return this.setProperty("minAutoRowCount",e)};V.prototype.setTooltip=function(e){T.warning("The aggregation tooltip is not supported for sap.ui.table.Table",this);return this.setAggregation("tooltip",e,true)};V.prototype.setNavigationMode=function(){this.setProperty("navigationMode","Scrollbar",true);T.error("The navigationMode property is deprecated and must not be used anymore. Your setting was defaulted to 'Scrollbar'",this);return this};V.prototype._getRowContexts=function(e){var t=this.getBinding();var i=this._getRowCounts();var o=this.getThreshold();e=e==null?i.count:e;if(o!==0){o=Math.max(e-i.fixedTop-i.fixedBottom,o)}e=Math.max(e,W(this).getMinRequestLength(),0);if(!t||e===0){return[]}var n=this._getFirstRenderedRowIndex();var r=[];if(i.fixedTop>0&&n>0){N(r,this._getFixedTopRowContexts(),0);N(r,this._getContexts(n+i.fixedTop,e-i.fixedBottom-i.fixedTop,o),i.fixedTop)}else{N(r,this._getContexts(n,e-i.fixedBottom,o),0)}if(i.fixedBottom>0){N(r,this._getFixedBottomRowContexts(),Math.min(i.fixedTop+i.scrollable,Math.max(this._getTotalRowCount()-i.fixedBottom,0)))}return r};function N(e,t,i){for(var o=0;o<t.length;o++){e[i+o]=t[o]}}V.prototype._getFixedTopRowContexts=function(){var e=this._getRowCounts();return e.fixedTop>0?this._getContexts(0,e.fixedTop,0,true):[]};V.prototype._getFixedBottomRowContexts=function(){var e=this._getRowCounts();var t=K(this,true);if(e.fixedBottom>0&&e.count-e.fixedBottom<t){return this._getContexts(t-e.fixedBottom,e.fixedBottom,0,true)}else{return[]}};V.prototype._getContexts=function(e,t,i,o){var n=this.getBinding();return n?n.getContexts(e,t,i,o):[]};V.prototype._adjustToTotalRowCount=function(){var e=this._getTotalRowCount();if(this._iBindingLength!==e){this._iBindingLength=e;this._updateFixedBottomRows();this._adjustFirstVisibleRowToTotalRowCount();g.Hook.call(this,P.TotalRowCountChanged)}};V.prototype._adjustFirstVisibleRowToTotalRowCount=function(){var e=this.getFirstVisibleRow();var t=this._getMaxFirstVisibleRowIndex();if(t<e&&this._bContextsAvailable){this._setFirstVisibleRowIndex(t,{onlySetProperty:true})}};V.prototype.refreshRows=function(e){this._bContextsAvailable=false;if(e===s.Sort||e===s.Filter){this.setFirstVisibleRow(0)}g.Hook.call(this,P.RefreshRows,e||g.RowsUpdateReason.Unknown)};V.prototype.updateRows=function(e,t){if(this.bIsDestroyed||this._bIsBeingDestroyed){return}if(t.detailedReason==="AddVirtualContext"){q(this);return}else if(t.detailedReason==="RemoveVirtualContext"){k(this);return}this._bContextsAvailable=true;if(e===s.Sort||e===s.Filter){this.setFirstVisibleRow(0)}this._adjustToTotalRowCount();G(this,e)};function q(e){var t=e._getRowContexts()[0];k(e);e._oVirtualRow=e._getRowClone("virtual");e._oVirtualRow.setBindingContext(t,e.getBindingInfo("rows").model);e.addAggregation("_hiddenDependents",e._oVirtualRow)}function k(e){if(e._oVirtualRow){e._oVirtualRow.destroy();delete e._oVirtualRow}}function G(e,t){if(e._bContextsAvailable){g.Hook.call(e,P.UpdateRows,t||g.RowsUpdateReason.Unknown)}}V.prototype.insertRow=function(){T.error('The control manages the rows aggregation. The method "insertRow" cannot be used programmatically!',this);return this};V.prototype.addRow=function(){T.error('The control manages the rows aggregation. The method "addRow" cannot be used programmatically!',this);return this};V.prototype.removeRow=function(){T.error('The control manages the rows aggregation. The method "removeRow" cannot be used programmatically!',this);return null};V.prototype.removeAllRows=function(){T.error('The control manages the rows aggregation. The method "removeAllRows" cannot be used programmatically!',this);return[]};V.prototype.destroyRows=function(){T.error('The control manages the rows aggregation. The method "destroyRows" cannot be used programmatically!',this);return this};V.prototype.setCreationRow=function(e){if(!g.isA(e,"sap.ui.table.CreationRow")){e=null}return this.setAggregation("creationRow",e)};V.prototype.getCreationRow=function(){return this.getAggregation("creationRow")};V.prototype.autoResizeColumn=function(e){this._getPointerExtension().doAutoResizeColumn(e)};V.prototype._attachEvents=function(){var e=this.$();var i=this.getId();if(o.getAnimationMode()!==A.none){jQuery(document.body).on("webkitTransitionEnd."+i+" transitionend."+i,function(t){if(jQuery(t.target).has(e).length>0){this._updateTableSizes(g.RowsUpdateReason.Animation)}}.bind(this))}t.resize.attachHandler(this._onWindowResize,this);c.attachEvents(this)};V.prototype._detachEvents=function(){var e=this.getId();jQuery(document.body).off("webkitTransitionEnd."+e+" transitionend."+e);g.deregisterResizeHandler(this,"Table");t.resize.detachHandler(this._onWindowResize,this);c.detachEvents(this)};V.prototype._cleanUpTimers=function(){var e;for(e in this._mTimeouts){if(this._mTimeouts[e]){window.clearTimeout(this._mTimeouts[e]);delete this._mTimeouts[e]}}for(e in this._mAnimationFrames){if(this._mAnimationFrames[e]){window.cancelAnimationFrame(this._mAnimationFrames[e]);delete this._mAnimationFrames[e]}}};function j(e){var t=e.getDomRef();if(t){e.getDomRef().classList.toggle("sapUiTableEmpty",g.isNoDataVisible(e));e._getAccExtension().updateAriaStateForOverlayAndNoData();e._getKeyboardExtension().updateNoDataAndOverlayFocus()}}V.prototype.removeColumn=function(e){e=this.removeAggregation("columns",e);if(e===null){return e}if(!this._bReorderInProcess){this._removeSortedColumn(e)}$(this);return e};V.prototype.removeAllColumns=function(){var e=this.removeAllAggregation("columns");this._aSortedColumns=[];$(this);return e};V.prototype.destroyColumns=function(){var e=this.destroyAggregation("columns");this._aSortedColumns=[];$(this);return e};V.prototype.addColumn=function(e){this.addAggregation("columns",e);$(this);return this};V.prototype.insertColumn=function(e,t){this.insertAggregation("columns",e,t);$(this);return this};function $(e){e.invalidateRowsAggregation();e._invalidateComputedFixedColumnCount();var t=e.getCreationRow();if(t){t._update()}}V.prototype._getTotalRowCount=function(){return K(this)};function K(e,t){var i=e.getBinding();var o=e.getBindingInfo("rows");if(!i){return 0}if(o.length!=null){return o.length}if(t===true){return i.getLength()}if(!e._bContextsAvailable){return E(e).iCachedBindingLength}E(e).iCachedBindingLength=i.getLength();return E(e).iCachedBindingLength}V.prototype._getMaxFirstVisibleRowIndex=function(){var e;if(g.isVariableRowHeightEnabled(this)){e=this._getTotalRowCount()-1}else{e=this._getTotalRowCount()-this._getRowCounts().count}return Math.max(0,e)};V.prototype._getMaxFirstRenderedRowIndex=function(){var e=this._getTotalRowCount()-this._getRowCounts().count;return Math.max(0,e)};V.prototype._getFirstRenderedRowIndex=function(){return E(this).iFirstRenderedRowIndex};V.prototype._getVisibleColumns=function(){var e=[];var t=this.getColumns();for(var i=0,o=t.length;i<o;i++){if(t[i].shouldRender()){e.push(t[i])}}return e};V.prototype._getColumnsWidth=function(e,t){var i=this.getColumns();var o=0;if(e!==0&&!e){e=0}if(t!==0&&!t){t=i.length}for(var n=e,r=t;n<r;n++){if(i[n]&&i[n].shouldRender()){var s=g.convertCSSSizeToPixel(i[n].getWidth());if(s==null){s=g.Column.getMinColumnWidth()}o+=s}}return o};V.prototype._onTableResize=function(e){var t=e.oldSize.width;var i=e.size.width;if(this._bInvalid||!this.getDomRef()||t===i){return}this._updateTableSizes(g.RowsUpdateReason.Resize)};V.prototype._onWindowResize=function(){if(this._bInvalid||!this.getDomRef()){return}if(t.browser.chrome&&window.devicePixelRatio!==this._nDevicePixelRatio){this._nDevicePixelRatio=window.devicePixelRatio;this._updateTableSizes(g.RowsUpdateReason.Zoom);this._adjustOutlineOffset()}};V.prototype._adjustOutlineOffset=function(){if(window.devicePixelRatio<1){this.addStyleClass("sapUiTableZoomout")}else{this.removeStyleClass("sapUiTableZoomout")}};V.prototype._disableTextSelection=function(e){jQuery(e||document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).on("selectstart",function(e){e.preventDefault();return false})};V.prototype._enableTextSelection=function(e){jQuery(e||document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).off("selectstart")};V.prototype._findAndfireCellEvent=function(e,t,i){var o=jQuery(t.target);var n=o.closest(".sapUiTableDataCell");var r=n.attr("id");var s=/.*-row(\d*)-col(\d*)/i.exec(r);var a=false;if(s){var l=s[1];var u=s[2];var p=this.getRows()[l];var h=p&&p.getCells()[u];var g=p&&p.getIndex();var c=d.ofCell(h).getId();var f=p.getRowBindingContext();var m={rowIndex:g,columnIndex:u,columnId:c,cellControl:h,rowBindingContext:f,cellDomRef:n.get(0)};a=!e.call(this,m);if(!a&&typeof i==="function"){m.cellDomRef=n[0];a=i.call(this,m)}}return a};V.prototype.getFocusDomRef=function(){this._getKeyboardExtension().initItemNavigation();if(this.getShowOverlay()){return this.getDomRef("overlay")}if(g.isNoDataVisible(this)){return this.getDomRef("noDataCnt")}var e=this._oFocusInfo&&this._oFocusInfo.targetInfo&&g.isA(this._oFocusInfo.targetInfo,"sap.ui.core.message.Message");if(e&&this.getColumnHeaderVisible()){var t=this._getVisibleColumns()[0];if(t){return t.getDomRef()}}var o=g.getFocusedItemInfo(this);if(o&&o.domRef){return o.domRef}return i.prototype.getFocusDomRef.apply(this,arguments)};V.prototype.pushSortedColumn=function(e,t){if(!t){this._aSortedColumns=[]}if(this._aSortedColumns.indexOf(e)===-1){this._aSortedColumns.push(e)}};V.prototype._removeSortedColumn=function(e){var t=this._aSortedColumns.indexOf(e);if(t>-1){this._aSortedColumns.splice(t,1)}};V.prototype.getSortedColumns=function(){return this._aSortedColumns.slice()};V.prototype.sort=function(e,t,i){if(!e){this._aSortedColumns.forEach(e=>{e.setSorted(false);e.setSortOrder(D.None)});this.getBinding()?.sort();this._aSortedColumns=[]}if(this.getColumns().indexOf(e)>=0){e._sort(t??D.Ascending,i)}};V.prototype.filter=function(e,t){if(this.getColumns().indexOf(e)>=0){if(t==null){t=""}else if(typeof t!=="string"){throw new Error("The filter value is not a string")}e.filter(t)}};V.prototype._updateSelection=function(){var e=this.getSelectionMode();if(e===M.None){return}var t=this._getSelectionPlugin().getRenderConfig();var i;var o;var n=this.$("selall");var r=this.getRows();for(var s=0;s<r.length;s++){var a=r[s];a._updateSelection()}if(!t.headerSelector.visible){return}if(t.headerSelector.type==="toggle"){var l=t.headerSelector.selected;n.toggleClass("sapUiTableSelAll",!l);this._getAccExtension().setSelectAllState(l);i=l?"TBL_DESELECT_ALL":"TBL_SELECT_ALL"}else if(t.headerSelector.type==="clear"){n.toggleClass("sapUiTableSelAllDisabled",!t.headerSelector.enabled);i="TBL_DESELECT_ALL";if(t.headerSelector.enabled){n.removeAttr("aria-disabled")}else{n.attr("aria-disabled","true")}}if(i){o=g.getResourceText(i);n.attr("title",o)}};V.prototype._onSelectionChanged=function(e){this._updateSelection();if(this._hasSelectionPlugin()){return}var t=this._getSelectionPlugin();var i=e.getParameter("rowIndices");var o=e.getParameter("selectAll");var n=this._iSourceRowIndex!==undefined?this._iSourceRowIndex:t.getSelectedIndex();if(this.getMetadata().hasProperty("selectedIndex")){this.setProperty("selectedIndex",t.getSelectedIndex(),true)}this.fireRowSelectionChange({rowIndex:n,rowContext:this.getContextByIndex(n),rowIndices:i,selectAll:o,userInteraction:this._iSourceRowIndex!==undefined})};V.prototype.getContextByIndex=function(e){var t=this.getBinding();var i=null;if(!t||e<0){return i}if(t.getContextByIndex){i=t.getContextByIndex(e)}else{i=t.getContexts(e,1,0,true)[0]}return i||null};V.prototype.getSelectedIndex=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#getSelectedIndex must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().getSelectedIndex()};V.prototype.setSelectedIndex=function(e){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#setSelectedIndex must not be called if a selection plugin is applied.")}this._getSelectionPlugin().setSelectedIndex(e);return this};V.prototype.clearSelection=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#clearSelection must not be called if a selection plugin is applied.")}this._getSelectionPlugin().clearSelection();return this};V.prototype.selectAll=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#selectAll must not be called if a selection plugin is applied.")}if(g.hasSelectAll(this)){this._getSelectionPlugin().selectAll()}return this};V.prototype.getSelectedIndices=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#getSelectedIndices must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().getSelectedIndices()};V.prototype.addSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#addSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().addSelectionInterval(e,t);return this};V.prototype.setSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#setSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().setSelectionInterval(e,t);return this};V.prototype.removeSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#removeSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().removeSelectionInterval(e,t);return this};V.prototype.isIndexSelected=function(e){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#isIndexSelected must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().isIndexSelected(e)};V.prototype.setGroupBy=function(e){var t=e;var i=n.getElementById(this.getGroupBy());if(typeof t==="string"){t=n.getElementById(t)}var o=false;if(t instanceof d&&t!==i){if(this.getColumns().indexOf(t)===-1){throw new Error("Column has to be part of the columns aggregation!")}var r=this.fireGroup({column:t,groupedColumns:[t.getId()],type:B.group});if(i){i.setGrouped(false);o=true}if(r&&this.getEnableGrouping()){t.setGrouped(true)}}if(!t||o){if(i){i.setGrouped(false)}g.Grouping.resetExperimentalGrouping(this)}this.setAssociation("groupBy",t);g.Grouping.setupExperimentalGrouping(this);return this};V.prototype.getBinding=function(e){return i.prototype.getBinding.call(this,e==null?"rows":e)};V.prototype.setEnableGrouping=function(e){var t=n.getElementById(this.getGroupBy());this.setProperty("enableGrouping",e);if(t){t.setGrouped(e)}if(e){g.Grouping.setupExperimentalGrouping(this)}else{g.Grouping.resetExperimentalGrouping(this)}return this};V.prototype.getComputedFixedColumnCount=function(){if(this._bIgnoreFixedColumnCount){return 0}return this._getSpanBasedComputedFixedColumnCount()};V.prototype._getSpanBasedComputedFixedColumnCount=function(){if(E(this).iComputedFixedColumnCount===null){var e=this.getColumns();var t;var i=this.getFixedColumnCount();for(var o=i-1;o>=0;o--){t=e[o];if(t){i=Math.max(i,t.getIndex()+g.Column.getHeaderSpan(t));break}}E(this).iComputedFixedColumnCount=Math.min(i,e.length)}return E(this).iComputedFixedColumnCount};V.prototype.setFixedColumnCount=function(e){this.setProperty("fixedColumnCount",e);this._invalidateComputedFixedColumnCount();var t=this.getColumns();var i;var o=this.$().find(".sapUiTableCtrlFirstCol > th");for(var n=this._getSpanBasedComputedFixedColumnCount()-1;n>=0;n--){i=t[n];if(i&&g.isVariableWidth(i.getWidth())){i._iFixWidth=o.filter("[data-sap-ui-headcolindex='"+i.getIndex()+"']").width()}}this._collectTableSizes();if(this.getEnableColumnFreeze()){this._invalidateColumnMenus()}return this};V.prototype.setFixedRowCount=function(e){if(!(parseInt(e)>=0)){T.error("Number of fixed rows must be greater or equal 0",this);return this}if(e+this.getFixedBottomRowCount()>=this.getVisibleRowCount()){T.error("Table '"+this.getId()+"' fixed rows('"+(e+this.getFixedBottomRowCount())+"') must be smaller than"+" numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);return this}if(this.getRowMode()){T.warning('If the "rowMode" aggregation is set, setting the "fixedRowCount" has no effect');return this.setProperty("fixedRowCount",e,true)}return this.setProperty("fixedRowCount",e)};V.prototype.setFixedBottomRowCount=function(e){if(!(parseInt(e)>=0)){T.error("Number of fixed bottom rows must be greater or equal 0",this);return this}if(e+this.getFixedRowCount()>=this.getVisibleRowCount()){T.error("Table '"+this.getId()+"' fixed rows('"+(e+this.getFixedRowCount())+"') must be smaller than"+" numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);return this}if(this.getRowMode()){T.warning('If the "rowMode" aggregation is set, setting the "iFixedBottomRowCount" has no effect');return this.setProperty("fixedBottomRowCount",e,true)}return this.setProperty("fixedBottomRowCount",e)};V.prototype.setThreshold=function(e){this.setProperty("threshold",e,true);return this};V.prototype._invalidateColumnMenus=function(){g.Hook.call(this,g.Hook.Keys.Table.InvalidateColumnMenus,this)};V.prototype._isTouchEvent=function(e){return!!(e&&e.originalEvent&&e.originalEvent.touches)};V.prototype._getRowClone=function(e){var t=typeof e==="number";var i=t;var o=i?this._aRowClones[e]:null;if(o&&!o.bIsDestroyed){return o}o=new p(this.getId()+"-rows"+"-row"+(t?e:"-"+e));if(i){this._aRowClones[e]=o}var n=this.getColumns();for(var r=0,s=n.length;r<s;r++){if(n[r].getVisible()){var a=n[r].getTemplateClone(r);if(a){o.addCell(a)}}}if(g.hasRowActions(this)){var l=this.getRowActionTemplate().clone();o.setAggregation("_rowAction",l,true)}var u=this.getRowSettingsTemplate();if(u){var d=u.clone();o.setAggregation("_settings",d,true)}return o};V.prototype.invalidateRowsAggregation=function(){this._bRowAggregationInvalid=true};V.prototype._invalidateComputedFixedColumnCount=function(){E(this).iComputedFixedColumnCount=null};V.prototype._getBaseRowHeight=function(){var e=W(this).getBaseRowContentHeight();if(e>0){return e+g.RowHorizontalFrameSize}else{return this._getDefaultRowHeight()}};V.prototype._getDefaultRowHeight=function(){var e=g.getContentDensity(this);return g.DefaultRowHeight[e]};V.prototype._getDefaultRowContentHeight=function(){var e=g.getContentDensity(this);return g.BaseSize[e]};V.prototype.setNoData=function(e){var t=g.getNoContentMessage(this);this.setAggregation("noData",e,true);var i=g.getNoContentMessage(this);if(g.isA(e,"sap.m.IllustratedMessage")){Z(this)}else{this.destroyAggregation("_noColumnsMessage",true)}if(typeof t==="string"&&typeof i==="string"){if(t!==i){this.$("noDataMsg").text(i)}}else{this.invalidate()}return this};function Z(e){if(e.getAggregation("_noColumnsMessage")||E(e).bIsLoadingNoColumnsMessage){return}E(e).bIsLoadingNoColumnsMessage=true;sap.ui.require(["sap/m/table/Util"],function(t){if(!g.isA(e.getNoData(),"sap.m.IllustratedMessage")){return}var i=t.getNoColumnsIllustratedMessage();i.setEnableVerticalResponsiveness(true);e.setAggregation("_noColumnsMessage",i,g.getVisibleColumnCount(e)>0);delete E(e).bIsLoadingNoColumnsMessage})}V.prototype.exportData=function(e){var t=sap.ui.requireSync("sap/ui/core/util/Export");e=e||{};if(!e.rows){var i=this.getBinding(),o=this.getBindingInfo("rows");var n=i.aFilters.concat(i.aApplicationFilters);e.rows={path:o.path,model:o.model,sorter:i.aSorters,filters:n,parameters:o.parameters}}if(!e.exportType){var r=sap.ui.requireSync("sap/ui/core/util/ExportTypeCSV");e.exportType=new r}var s=e.rows.model;if(!s){var a=e.rows.path;var l=a.indexOf(">");if(l>0){s=a.substr(0,l)}}if(!e.columns){e.columns=[];var u=this.getColumns();for(var d=0,p=u.length;d<p;d++){var h=u[d];if(h.getSortProperty()){e.columns.push({name:h.getLabel().getText(),template:{content:{path:h.getSortProperty(),model:s}}})}}}var g=new t(e);this.addDependent(g);return g};V.prototype._onPersoApplied=function(){var e=this.getColumns();var t=[];for(var i=0,o=e.length;i<o;i++){var n=e[i];if(n.getSorted()&&n.getSortOrder()!==D.None){t.push(new l(n.getSortProperty(),n.getSortOrder()===D.Descending))}}var r=this.getBinding();if(r){if(t.length>0){r.sort(t)}}};V.prototype.setBusy=function(e){var t=this.getBusy();var o=i.prototype.setBusy.call(this,e,"sapUiTableGridCnt");var n=this.getBusy();if(t!==n){this.fireBusyStateChanged({busy:n})}return o};V.prototype.setEnableBusyIndicator=function(e){this.setProperty("enableBusyIndicator",e,true);if(this.getEnableBusyIndicator()){Y(this)}else{this.setBusy(false);J(this)}return this};V.prototype._onBindingDataRequested=function(){E(this).iPendingRequests++;Y(this)};V.prototype._onBindingDataReceived=function(){E(this).iPendingRequests--;Y(this)};V.prototype._hasPendingRequests=function(){return E(this).iPendingRequests>0};function Y(e){if(!e.getEnableBusyIndicator()){return}J(e);if(e._hasPendingRequests()){e.setBusy(true)}else{E(e).hideBusyIndicatorTimeoutId=setTimeout(function(){e.setBusy(false);J(e)},10)}}function J(e){clearTimeout(E(e).hideBusyIndicatorTimeoutId);delete E(e).hideBusyIndicatorTimeoutId}V.prototype._setLargeDataScrolling=function(e){this._bLargeDataScrolling=!!e};V.prototype.setRowActionTemplate=function(e){this.setAggregation("rowActionTemplate",e);this.invalidateRowsAggregation();return this};V.prototype.setRowActionCount=function(e){if(typeof e==="number"){e=Math.max(0,Math.min(e,2))}return this.setProperty("rowActionCount",e)};V.prototype.setRowSettingsTemplate=function(e){this.setAggregation("rowSettingsTemplate",e);this.invalidateRowsAggregation();return this};V.prototype._getSelectionPlugin=function(){var e=this._oSelectionPlugin||this._oLegacySelectionPlugin;if(typeof this._getSelectedIndicesCount==="function"&&e.getSelectedCount!==this._getSelectedIndicesCount){e.getSelectedCount=this._getSelectedIndicesCount;["isIndexSelected","setSelectedIndex","getSelectedIndex","getSelectedIndices","setSelectionInterval","addSelectionInterval","removeSelectionInterval","selectAll","clearSelection"].forEach(function(t){e[t]=this[t]}.bind(this))}return e};V.prototype._hasSelectionPlugin=function(){return this._oSelectionPlugin!=null};function Q(e){var t=e.getDependents().filter(e=>e.isA("sap.ui.table.plugins.SelectionPlugin"));t.unshift(...e.getPlugins());return t[0]}V.prototype._initSelectionPlugin=function(){var e=Q(this);if(this.isDestroyed()||this.isDestroyStarted()){return}if(e){this._destroyLegacySelectionPlugin();ee(this,this._oSelectionPlugin);X(this,e);this._oSelectionPlugin=e}else{this._initLegacySelectionPlugin();ee(this,this._oSelectionPlugin);delete this._oSelectionPlugin}};V.prototype._initLegacySelectionPlugin=function(){if(this._oLegacySelectionPlugin||Q(this)){return}this._oLegacySelectionPlugin=this._createLegacySelectionPlugin();this.addAggregation("_hiddenDependents",this._oLegacySelectionPlugin);X(this,this._oLegacySelectionPlugin)};V.prototype._destroyLegacySelectionPlugin=function(){if(this._oLegacySelectionPlugin&&!this._oLegacySelectionPlugin.isDestroyStarted()){this._oLegacySelectionPlugin.destroy();delete this._oLegacySelectionPlugin}};V.prototype._createLegacySelectionPlugin=function(){return new S};function X(e,t){if(t&&t.getMetadata().hasEvent("selectionChange")){t.attachSelectionChange(e._onSelectionChanged,e)}}function ee(e,t){if(t&&t.getMetadata().hasEvent("selectionChange")){t.detachSelectionChange(e._onSelectionChanged,e)}}V.prototype.insertAggregation=function(e,t,o,n){if(e==="_hiddenDependents"){return i.prototype.insertAggregation.call(this,e,t,o,true)}return i.prototype.insertAggregation.apply(this,arguments)};V.prototype.addAggregation=function(e,t,o){if(e==="_hiddenDependents"){return i.prototype.addAggregation.call(this,e,t,true)}return i.prototype.addAggregation.apply(this,arguments)};V.prototype.removeAggregation=function(e,t,o){if(e==="_hiddenDependents"){return i.prototype.removeAggregation.call(this,e,t,true)}return i.prototype.removeAggregation.apply(this,arguments)};V.prototype.removeAllAggregation=function(e,t){if(e==="_hiddenDependents"){return i.prototype.removeAllAggregation.call(this,e,true)}return i.prototype.removeAllAggregation.apply(this,arguments)};V.prototype.destroyAggregation=function(e,t){if(e==="_hiddenDependents"){return i.prototype.destroyAggregation.call(this,e,true)}i.prototype.destroyAggregation.apply(this,arguments);if(e==="rows"){this._aRowClones.forEach(function(e){e.destroy()});this._aRowClones=[]}return this};V.prototype.getCellControl=function(e,t,i){var o=g.getRowColCell(this,e,t,!i);return o.cell};V.prototype._fireRowsUpdated=function(e){var t={reason:e||g.RowsUpdateReason.Unknown};this.onRowsUpdated(t);clearTimeout(this._mTimeouts.fireRowsUpdated);this._mTimeouts.fireRowsUpdated=setTimeout(function(){this.onRowsContentUpdated(t);this.fireEvent("_rowsUpdated",t);this.fireRowsUpdated()}.bind(this),0)};V.prototype.onRowsUpdated=function(e){g.Grouping.updateGroups(this);g.Menu.closeContentCellContextMenu(this);this._getAccExtension()._updateAriaRowIndices();this._updateSelection();j(this);this.getRows().forEach(function(e){e.getCells().forEach(function(t){var i=d.ofCell(t);var o=i._getCellContentVisibilitySettings();var n=e.getDomRefs(true).row.find('td[data-sap-ui-colid="'+i.getId()+'"]');var r=true;if(!n){return}if(e.isGroupHeader()){if(!e.isExpandable()){r=o.groupHeader.nonExpandable}else if(e.isExpanded()){r=o.groupHeader.expanded}else{r=o.groupHeader.collapsed}}else if(e.isTotalSummary()){r=o.summary.total}else if(e.isGroupSummary()){r=o.summary.group}else{r=o.standard}n.toggleClass("sapUiTableCellHidden",!r)})})};V.prototype.onRowsContentUpdated=function(e){if(this.getRows().length>0){this._resetRowHeights();this._aRowHeights=this._collectRowHeights(false);this._updateRowHeights(this._aRowHeights,false);this._getAccExtension().updateAccForCurrentCell(e.reason)}};V.prototype._enableSynchronization=function(){var e=this;return new Promise(function(t,i){sap.ui.require(["sap/ui/table/extensions/Synchronization"],function(i){t(c.enrich(e,i).getInterface())},function(e){i(e)})})};V.prototype._enableLegacyMultiSelection=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#_enableLegacyMultiSelection must not be called"+" if a selection plugin is applied.")}this._legacyMultiSelection=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: The legacy multi selection is not supported if a selection plugin is applied")}var i=!!(t.metaKey||t.ctrlKey);if(!this.isIndexSelected(e)){if(i){this.addSelectionInterval(e,e)}else{this.setSelectedIndex(e)}}else if(i||this.getSelectedIndices().length===1){this.removeSelectionInterval(e,e)}else{this.setSelectedIndex(e)}}.bind(this)};V.prototype._setRowCountConstraints=function(e){this.setProperty("rowCountConstraints",e)};function te(e,t){const i=e.getAggregation("_hiddenDependents")||[];return t.filter(e=>!i.includes(e))}V.prototype.findAggregatedObjects=function(){return te(this,i.prototype.findAggregatedObjects.apply(this,arguments))};V.prototype.findElements=function(){return te(this,i.prototype.findElements.apply(this,arguments))};V.prototype.getPlugin=function(e){if(!e||!e.startsWith("sap.ui.table.plugins.")){throw new Error("This method can only be used to get plugins of the sap.ui.table library")}var t=this.getDependents().find(t=>t.isA(e));if(!t){t=this.getPlugins().find(t=>t.isA(e))}return t};return V});
//# sourceMappingURL=Table.js.map