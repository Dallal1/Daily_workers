/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./ExtensionBase","./AccessibilityRender","../utils/TableUtils","../library","sap/ui/core/ControlBehavior","sap/ui/core/Element","sap/ui/thirdparty/jquery"],function(e,t,a,i,r,o,jQuery){"use strict";var l=i.SelectionMode;var n=a.CELLTYPE;var s={getAccInfoOfControl:function(e){var t=null;if(e&&typeof e.getAccessibilityInfo==="function"){if(typeof e.getVisible==="function"&&!e.getVisible()){t=s._normalize({})}else{var i=e.getAccessibilityInfo();if(i){var r={};s._flatten(i,r);t=r}}if(t&&!t.description){t.description=a.getResourceText("TBL_CTRL_STATE_EMPTY")}}return t},_normalize:function(e){if(!e){return null}if(e._normalized){return e}e.role=e.role||"";e.type=e.type||"";e.description=e.description||"";e.enabled=e.enabled===true||e.enabled===false?e.enabled:null;e.editable=e.editable===true||e.editable===false?e.editable:null;e.children=e.children||[];e._normalized=true;return e},_flatten:function(e,t,a){a=a?a:0;s._normalize(e);if(a==0){s._normalize(t);t._descriptions=[]}t._descriptions.push(s._getFullDescription(e));e.children.forEach(function(e){if(!e.getAccessibilityInfo||e.getVisible&&!e.getVisible()){return}var i=e.getAccessibilityInfo();if(i){s._flatten(i,t,a+1)}});if(a==0){t.description=t._descriptions.join(" ").trim();t._descriptions=undefined}},_getFullDescription:function(e){var t=e.type+" "+e.description;if(e.enabled===false){t=t+" "+a.getResourceText("TBL_CTRL_STATE_DISABLED")}else if(e.editable===false){t=t+" "+a.getResourceText("TBL_CTRL_STATE_READONLY")}else if(e.required===true){t=t+" "+a.getResourceText("TBL_CTRL_STATE_REQUIRED")}return t.trim()}};var u={getColumnIndexOfFocusedCell:function(e){var t=e.getTable();var i=a.getFocusedItemInfo(t);return i.cellInRow-(a.hasRowHeader(t)?1:0)},getInfoOfFocusedCell:function(e){var t=e.getTable();var i=t._getItemNavigation();var r=t.getDomRef();if(!e.getAccMode()||!r||!i){return null}var o=i.getFocusedDomRef();if(!o||o!==document.activeElement){return null}return a.getCellInfo(o)},getRelevantColumnHeaders:function(e,t){var i=[];if(!e||!t||!e.getColumnHeaderVisible()){return i}var r=a.getHeaderRowCount(e);if(r>0){var o=t.getId();i.push(o);for(var l=1;l<r;l++){i.push(o+"_"+l)}var n=a.Column.getParentSpannedColumns(e,o);if(n&&n.length){for(var s=0;s<n.length;s++){var u=n[s].level;var c=n[s].column.getId();i[u]=u===0?c:c+"_"+u}}}return i},isHiddenCell:function(e,t){var i=a.Grouping.isInGroupHeaderRow(e);var r=a.Grouping.isInSummaryRow(e);var o=!!t&&!!t.hasStyleClass;var l=e.parent().hasClass("sapUiTableRowHidden");var n=e.hasClass("sapUiTableCellHidden");var s=i&&o&&t.hasStyleClass("sapUiAnalyticalTableGroupCellHidden");var u=r&&o&&t.hasStyleClass("sapUiAnalyticalTableSumCellHidden");return l||n||s||u},isTreeColumnCell:function(e,t){return a.Grouping.isInTreeMode(e.getTable())&&t.hasClass("sapUiTableCellFirst")},getColumnTooltip:function(e){if(!e){return null}var t=e.getLabel();function i(e){if(!e){return false}var a=t&&t.getText?t.getText():"";return e==a}var r=e.getTooltip_AsString();if(!i(r)){return r}if(a.isA(t,"sap.ui.core.Control")){r=t.getTooltip_AsString()}if(!i(r)){return r}return null},getGridSize:function(e){var t=a.hasRowHeader(e);var i=a.hasRowActions(e);var r=a.getVisibleColumnCount(e)+(t?1:0)+(i?1:0);var o=a.isNoDataVisible(e)?0:Math.max(e._getTotalRowCount(),e._getRowCounts()._fullsize);return{columnCount:r,rowCount:a.getHeaderRowCount(e)+o}},getRowIndex:function(e){return e.getIndex()+1+a.getHeaderRowCount(e.getTable())},updateRowColCount:function(e){var t=e.getTable(),i=t._getItemNavigation(),r=false,o=false,l=false,n=a.hasRowHeader(t);if(i){var s=u.getColumnIndexOfFocusedCell(e)+1+(n?1:0);var c=t.getRows()[a.getRowIndexOfFocusedCell(t)];var d=c?u.getRowIndex(c):0;var f=u.getGridSize(t);r=e._iLastRowNumber!=d||e._iLastRowNumber==d&&e._iLastColumnNumber==s;o=e._iLastColumnNumber!=s;l=e._iLastRowNumber==null&&e._iLastColumnNumber==null;t.$("rownumberofrows").text(r&&d>0?a.getResourceText("TBL_ROW_ROWCOUNT",[d,f.rowCount]):".");t.$("colnumberofcols").text(o?a.getResourceText("TBL_COL_COLCOUNT",[s,f.columnCount]):".");t.$("ariacount").text(l?a.getResourceText("TBL_DATA_ROWS_COLS",[f.rowCount,f.columnCount]):".");e._iLastRowNumber=d;e._iLastColumnNumber=s}return{rowChange:r,colChange:o,initial:l}},cleanupCellModifications:function(e){if(e._cleanupInfo){e._cleanupInfo.cell.attr(e._cleanupInfo.attr);e._cleanupInfo=null}},storeDefaultsBeforeCellModifications:function(e,t,a,i){e._cleanupInfo={cell:t,attr:{"aria-labelledby":a&&a.length?a.join(" "):null,"aria-describedby":i&&i.length?i.join(" "):null}}},performCellModifications:function(e,t,i,r,o,n,s,c){u.storeDefaultsBeforeCellModifications(e,t,i,r);var d=u.updateRowColCount(e);var f=e.getTable();f.$("cellacc").text(s||".");if(c){c(o,n,d.rowChange,d.colChange,d.initial)}var E="";if(d.initial){E=f.getId()+"-ariacount";if(f.getSelectionMode()!==l.None){E=E+" "+f.getId()+"-ariaselection"}}if(o&&o.length){E=E+" "+o.join(" ")}if(d.initial||d.rowChange){if(a.hasRowNavigationIndicators(f)){var g=a.getCellInfo(t);if(g.type!==a.CELLTYPE.COLUMNHEADER&&g.type!==a.CELLTYPE.COLUMNROWHEADER){var T=f.getRows()[g.rowIndex].getAggregation("_settings");if(T.getNavigated()){E=E+" "+f.getId()+"-rownavigatedtext"}}}}t.attr({"aria-labelledby":E?E:null,"aria-describedby":n&&n.length?n.join(" "):null})},modifyAccOfDATACELL:function(e){var t=this.getTable();var i=t.getId();var r=t._getItemNavigation();var o=jQuery(e.cell);if(!r){return}var l=a.getRowIndexOfFocusedCell(t),n=u.getColumnIndexOfFocusedCell(this),d=a.getRowColCell(t,l,n,false),f=null,E=d.row,g=E.getId(),T=u.isHiddenCell(o,d.cell),p=u.isTreeColumnCell(this,o),b=u.getAriaAttributesFor(this,c.ELEMENTTYPES.DATACELL,{index:n,column:d.column,fixed:a.isFixedColumn(t,n)})["aria-labelledby"]||[],h=[],C=[i+"-rownumberofrows",i+"-colnumberofcols"],R=E.isGroupHeader(),A=E.isSummary();if(R){C.push(i+"-ariarowgrouplabel")}else if(E.isTotalSummary()){C.push(i+"-ariagrandtotallabel")}else if(E.isGroupSummary()){C.push(i+"-ariagrouptotallabel")}if(a.hasRowHighlights(t)&&!R&&!A){C.push(g+"-highlighttext")}C=C.concat(b);if(!T){f=s.getAccInfoOfControl(d.cell);C.push(f?i+"-cellacc":d.cell.getId());if(a.getInteractiveElements(o)!==null){C.push(i+"-toggleedit")}}var v=f?f.description:".";if(p&&!T){var L=u.getAriaAttributesFor(this,c.ELEMENTTYPES.TREEICON,{row:d.row});if(L&&L["aria-label"]){v=L["aria-label"]+" "+v}}u.performCellModifications(this,o,b,null,C,h,v,function(e,i,r,l){if(R&&r){e.splice(3,0,g+"-groupHeader")}var n=o.find(".sapUiTableTreeIcon").not(".sapUiTableTreeIconLeaf").length==1;if((n||R)&&(r||l)){i.push(t.getId()+(!E.isExpanded()?"-rowexpandtext":"-rowcollapsetext"))}else if(!T&&!R&&!A&&a.isRowSelectionAllowed(t)&&r){e.push(g+"-rowselecttext")}})},modifyAccOfROWHEADER:function(e){var t=this.getTable();var i=t.getId();var r=jQuery(e.cell);var o=t.getRows()[e.rowIndex];var l=o.getId();var n=u.getAriaAttributesFor(this,c.ELEMENTTYPES.ROWHEADER)["aria-labelledby"]||[];var s=n.concat([i+"-rownumberofrows",i+"-colnumberofcols"]);if(!o.isSummary()&&!o.isGroupHeader()&&!o.isContentHidden()){s.push(l+"-rowselecttext");if(a.hasRowHighlights(t)){s.push(l+"-highlighttext")}}if(o.isGroupHeader()){s.push(i+"-ariarowgrouplabel");s.push(l+"-groupHeader");s.push(i+(o.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))}if(o.isTotalSummary()){s.push(i+"-ariagrandtotallabel")}else if(o.isGroupSummary()){s.push(i+"-ariagrouptotallabel")}u.performCellModifications(this,r,n,null,s,null,null)},modifyAccOfCOLUMNHEADER:function(e){var t=this.getTable();var i=jQuery(e.cell);var r=o.getElementById(i.attr("data-sap-ui-colid"));var l=a.Column.getHeaderLabel(r);var n=u.getAriaAttributesFor(this,c.ELEMENTTYPES.COLUMNHEADER,{headerId:i.attr("id"),column:r,index:i.attr("data-sap-ui-colindex")});var s=u.getColumnTooltip(r);var d=[t.getId()+"-colnumberofcols"].concat(n["aria-labelledby"]);var f=e.columnSpan;if(a.isA(l,"sap.m.Label")&&l.getRequired()){d.push(t.getId()+"-ariarequired")}if(f>1){d.push(t.getId()+"-ariacolspan");t.$("ariacolspan").text(a.getResourceText("TBL_COL_DESC_SPAN",[""+f]))}if(s){d.push(t.getId()+"-cellacc")}if(f<=1&&r&&r.getFiltered()){d.push(t.getId()+"-ariacolfiltered")}u.performCellModifications(this,i,n["aria-labelledby"],n["aria-describedby"],d,n["aria-describedby"],s)},modifyAccOfCOLUMNROWHEADER:function(e){var t=this.getTable();var a=jQuery(e.cell);var i=a.hasClass("sapUiTableSelAllVisible");var r=u.getAriaAttributesFor(this,c.ELEMENTTYPES.COLUMNROWHEADER,{enabled:i,checked:i&&!t.$().hasClass("sapUiTableSelAll")});var o=[t.getId()+"-colnumberofcols"].concat(r["aria-labelledby"]);u.performCellModifications(this,a,r["aria-labelledby"],r["aria-describedby"],o,r["aria-describedby"],null)},modifyAccOfROWACTION:function(e){var t=this.getTable();var i=t.getId();var r=jQuery(e.cell);var o=t.getRows()[e.rowIndex];var l=o.getId();var n=u.isHiddenCell(r);var s=u.getAriaAttributesFor(this,c.ELEMENTTYPES.ROWACTION)["aria-labelledby"]||[];var d=[i+"-rownumberofrows",i+"-colnumberofcols"].concat(s);var f=[];var E=o.isGroupHeader();if(E){d.push(i+"-ariarowgrouplabel");d.push(i+(o.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))}if(o.isTotalSummary()){d.push(i+"-ariagrandtotallabel")}else if(o.isGroupSummary()){d.push(i+"-ariagrouptotallabel")}if(a.hasRowHighlights(t)&&!o.isGroupHeader()&&!o.isSummary()){d.push(l+"-highlighttext")}var g="";if(!n){var T=o.getRowAction();if(T){var p=T.getAccessibilityInfo();if(p){d.push(i+"-cellacc");g=p.description;if(a.getInteractiveElements(r)!==null){f.push(i+"-toggleedit")}}}}u.performCellModifications(this,r,s,[],d,f,g,function(e,t,a){if(E&&a){var r=e.indexOf(i+"-ariarowgrouplabel")+1;e.splice(r,0,l+"-groupHeader")}})},getAriaAttributesFor:function(e,t,i){var r={},o=e.getTable(),n=o.getId();function s(e,t,i,o){var l="";if(i&&o){l="overlay,nodata"}else if(i&&!o){l="overlay"}else if(!i&&o){l="nodata"}var n=false;if(i&&e.getShowOverlay()||o&&a.isNoDataVisible(e)){n=true}if(n){r["aria-hidden"]="true"}if(l){r["data-sap-ui-table-acc-covered"]=l}}switch(t){case c.ELEMENTTYPES.COLUMNROWHEADER:var d=o._getSelectionPlugin().getRenderConfig();if(d.headerSelector.visible){if(d.headerSelector.type==="toggle"){r["role"]=["checkbox"];if(i&&i.enabled){r["aria-checked"]=i.checked?"true":"false"}}else if(d.headerSelector.type==="clear"){r["role"]=["button"];if(!i||!i.enabled){r["aria-disabled"]="true"}}}break;case c.ELEMENTTYPES.ROWHEADER:r["role"]="gridcell";r["aria-colindex"]=1;if(a.hasRowHeader(o)&&o.getSelectionMode()===l.None){r["aria-labelledby"]=[n+"-rowselecthdr"]}break;case c.ELEMENTTYPES.ROWACTION:r["role"]="gridcell";r["aria-colindex"]=a.getVisibleColumnCount(o)+1+(a.hasRowHeader(o)?1:0);r["aria-labelledby"]=[n+"-rowacthdr"];break;case c.ELEMENTTYPES.COLUMNHEADER:var f=i&&i.column;var E=i&&i.colspan;r["role"]="columnheader";r["aria-colindex"]=i.index+1+(a.hasRowHeader(o)?1:0);var g=[];if(i&&i.headerId){var T=u.getRelevantColumnHeaders(o,f);var p=T.indexOf(i.headerId);g=p>0?T.slice(0,p+1):[i.headerId]}for(var b=0;b<g.length;b++){g[b]=g[b]+"-inner"}r["aria-labelledby"]=g;if(i&&i.index<o.getComputedFixedColumnCount()){r["aria-labelledby"].push(n+"-ariafixedcolumn")}if(!E&&f){r["aria-sort"]=f.getSortOrder().toLowerCase();if(!f.getSorted()){r["aria-sort"]="none"}}if(!E&&f){var h=f.getHeaderMenuInstance();if(h){var C=h.getAriaHasPopupType();if(C!=="None"){r["aria-haspopup"]=C.toLowerCase()}}if(!h&&f._menuHasItems()){r["aria-haspopup"]="menu"}}break;case c.ELEMENTTYPES.DATACELL:r["role"]="gridcell";r["aria-colindex"]=i.index+1+(a.hasRowHeader(o)?1:0);if(i.column){var g=u.getRelevantColumnHeaders(o,i.column);for(var b=0;b<g.length;b++){g[b]=g[b]+"-inner"}if(i&&i.fixed){g.push(n+"-ariafixedcolumn")}r["aria-labelledby"]=g}break;case c.ELEMENTTYPES.ROOT:break;case c.ELEMENTTYPES.TABLE:r["role"]="presentation";s(o,r,true,true);break;case c.ELEMENTTYPES.CONTAINER:break;case c.ELEMENTTYPES.CONTENT:r["role"]=a.Grouping.isInGroupMode(o)||a.Grouping.isInTreeMode(o)?"treegrid":"grid";r["aria-labelledby"]=[].concat(o.getAriaLabelledBy());if(o.getTitle()){r["aria-labelledby"].push(o.getTitle().getId())}if(o.getSelectionMode()===l.MultiToggle){r["aria-multiselectable"]="true"}var R=o._getRowCounts();var A=a.hasFixedColumns(o);var v=R.fixedTop>0;var L=R.fixedBottom>0;var w=a.hasRowHeader(o);var O=a.hasRowActions(o);var m=u.getGridSize(o);r["aria-owns"]=[n+"-table"];if(A){r["aria-owns"].push(n+"-table-fixed")}if(v){r["aria-owns"].push(n+"-table-fixrow");if(A){r["aria-owns"].push(n+"-table-fixed-fixrow")}}if(L){r["aria-owns"].push(n+"-table-fixrow-bottom");if(A){r["aria-owns"].push(n+"-table-fixed-fixrow-bottom")}}if(w){r["aria-owns"].push(n+"-sapUiTableRowHdrScr")}if(O){r["aria-owns"].push(n+"-sapUiTableRowActionScr")}r["aria-rowcount"]=m.rowCount;r["aria-colcount"]=m.columnCount;if(o.isA("sap.ui.table.AnalyticalTable")){r["aria-roledescription"]=a.getResourceText("TBL_ANALYTICAL_TABLE_ROLE_DESCRIPTION")}break;case c.ELEMENTTYPES.TABLEHEADER:r["role"]="heading";r["aria-level"]="2";s(o,r,true,false);break;case c.ELEMENTTYPES.COLUMNHEADER_TBL:r["role"]="presentation";break;case c.ELEMENTTYPES.COLUMNHEADER_ROW:r["role"]="row";s(o,r,true,false);break;case c.ELEMENTTYPES.CREATIONROW_TBL:r["role"]="presentation";break;case c.ELEMENTTYPES.CREATIONROW:r["role"]="form";r["aria-labelledby"]=i.creationRow.getId()+"-label";s(o,r,true,false);break;case c.ELEMENTTYPES.ROWHEADER_COL:s(o,r,true,true);break;case c.ELEMENTTYPES.TH:r["role"]="presentation";r["scope"]="col";r["aria-hidden"]="true";break;case c.ELEMENTTYPES.TR:r["role"]="row";if(i.rowNavigated){r["aria-current"]=true}if(!i.fixedCol){r["aria-owns"]=[];if(a.hasRowHeader(o)){r["aria-owns"].push(n+"-rowsel"+i.index)}if(a.hasFixedColumns(o)){for(var N=0;N<o.getComputedFixedColumnCount();N++){r["aria-owns"].push(n+"-rows-row"+i.index+"-col"+N)}}if(a.hasRowActions(o)){r["aria-owns"].push(n+"-rowact"+i.index)}}break;case c.ELEMENTTYPES.TREEICON:if(a.Grouping.isInTreeMode(o)){r={"aria-label":"",title:"",role:""};if(o.getBinding()){if(i&&i.row){if(i.row.isExpandable()){var _=a.getResourceText("TBL_COLLAPSE_EXPAND");r["title"]=_;r["aria-expanded"]=""+!!i.row.isExpanded();r["aria-hidden"]="false";r["role"]="button"}else{r["aria-label"]=a.getResourceText("TBL_LEAF");r["aria-hidden"]="true"}}}}break;case c.ELEMENTTYPES.NODATA:var y=a.getNoContentMessage(o);var g=[];r["role"]="gridcell";if(a.isA(y,"sap.ui.core.Control")){if(y.getAccessibilityReferences instanceof Function){var x=y.getAccessibilityReferences();g.push(x.title);g.push(x.description)}else{g.push(y.getId())}}else{g.push(n+"-noDataMsg")}r["aria-labelledby"]=g;s(o,r,true,false);break;case c.ELEMENTTYPES.OVERLAY:r["role"]="region";r["aria-labelledby"]=[].concat(o.getAriaLabelledBy());if(o.getTitle()){r["aria-labelledby"].push(o.getTitle().getId())}r["aria-labelledby"].push(n+"-ariainvalid");break;case c.ELEMENTTYPES.TABLEFOOTER:case c.ELEMENTTYPES.TABLESUBHEADER:s(o,r,true,false);break;case c.ELEMENTTYPES.ROWACTIONHEADER:r["aria-hidden"]="true";break;case"PRESENTATION":r["role"]="presentation";break}return r}};var c=e.extend("sap.ui.table.extensions.Accessibility",{_init:function(i,o,l){this._accMode=r.isAccessibilityEnabled();this._busyCells=[];a.addDelegate(i,this);e.enrich(i,t);return"AccExtension"},_attachEvents:function(){a.Hook.register(this.getTable(),a.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_detachEvents:function(){a.Hook.deregister(this.getTable(),a.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_debug:function(){this._ExtensionHelper=u;this._ACCInfoHelper=s},destroy:function(){this.getTable().removeEventDelegate(this);this._busyCells=[];e.prototype.destroy.apply(this,arguments)},getAriaAttributesFor:function(e,t){return u.getAriaAttributesFor(this,e,t)},onfocusin:function(e){var t=this.getTable();if(!t||a.getCellInfo(e.target).cell==null){return}if(t._mTimeouts._cleanupACCExtension){clearTimeout(t._mTimeouts._cleanupACCExtension);t._mTimeouts._cleanupACCExtension=null}this.updateAccForCurrentCell("Focus")},onfocusout:function(e){var t=this.getTable();if(!t){return}t._mTimeouts._cleanupACCExtension=setTimeout(function(){var e=this.getTable();if(!e){return}this._iLastRowNumber=null;this._iLastColumnNumber=null;u.cleanupCellModifications(this);e._mTimeouts._cleanupACCExtension=null}.bind(this),100)}});c.ELEMENTTYPES={DATACELL:"DATACELL",COLUMNHEADER:"COLUMNHEADER",ROWHEADER:"ROWHEADER",ROWACTION:"ROWACTION",COLUMNROWHEADER:"COLUMNROWHEADER",ROOT:"ROOT",CONTAINER:"CONTAINER",CONTENT:"CONTENT",TABLE:"TABLE",TABLEHEADER:"TABLEHEADER",TABLEFOOTER:"TABLEFOOTER",TABLESUBHEADER:"TABLESUBHEADER",COLUMNHEADER_TBL:"COLUMNHEADER_TABLE",COLUMNHEADER_ROW:"COLUMNHEADER_ROW",CREATIONROW_TBL:"CREATIONROW_TABLE",CREATIONROW:"CREATIONROW",ROWHEADER_COL:"ROWHEADER_COL",TH:"TH",TR:"TR",TREEICON:"TREEICON",ROWACTIONHEADER:"ROWACTIONHEADER",NODATA:"NODATA",OVERLAY:"OVERLAY"};c.prototype.getAccMode=function(){return this._accMode};c.prototype._updateAriaRowIndices=function(){if(!this._accMode){return}var e=this.getTable();var t=e.getRows();var a,i,r;for(i=0;i<t.length;i++){a=t[i];r=a.getDomRefs(true);r.row.not(r.rowHeaderPart).not(r.rowActionPart).attr("aria-rowindex",u.getRowIndex(a))}};c.prototype._updateAriaRowCount=function(){var e=this.getTable();var t=e.$("sapUiTableGridCnt");if(t){t.attr("aria-rowcount",u.getGridSize(e).rowCount)}};c.prototype.updateAccForCurrentCell=function(e){if(!this._accMode||!this.getTable()._getItemNavigation()){return}if(e==="Focus"||e===a.RowsUpdateReason.Expand||e===a.RowsUpdateReason.Collapse){u.cleanupCellModifications(this)}var t=u.getInfoOfFocusedCell(this);var i;if(!t||!t.isOfType(n.ANY)){return}if(t.isOfType(n.DATACELL)){i=c.ELEMENTTYPES.DATACELL}else if(t.isOfType(n.COLUMNHEADER)){i=c.ELEMENTTYPES.COLUMNHEADER}else if(t.isOfType(n.ROWHEADER)){i=c.ELEMENTTYPES.ROWHEADER}else if(t.isOfType(n.ROWACTION)){i=c.ELEMENTTYPES.ROWACTION}else if(t.isOfType(n.COLUMNROWHEADER)){i=c.ELEMENTTYPES.COLUMNROWHEADER}if(!u["modifyAccOf"+i]){return}if(e!=="Focus"&&e!==a.RowsUpdateReason.Expand&&e!==a.RowsUpdateReason.Collapse){if(t.isOfType(n.ANYCONTENTCELL)){t.cell.setAttribute("role","status");t.cell.setAttribute("role","gridcell")}else{return}}u["modifyAccOf"+i].apply(this,[t])};c.prototype.updateSelectionStateOfRow=function(e){if(!this._accMode){return}var t=e.getDomRefs(true);var a="";if(!e.isEmpty()&&!e.isGroupHeader()&&!e.isSummary()){var i=this.getKeyboardTexts();var r=this.getTable();var o=r._getSelectionPlugin().isSelected(e);if(t.row){t.row.not(t.rowHeaderPart).not(t.rowActionPart).add(t.row.children(".sapUiTableCell")).attr("aria-selected",o?"true":"false")}a=o?i.rowDeselect:i.rowSelect}if(t.rowSelectorText){t.rowSelectorText.text(a)}};c.prototype.updateAriaExpandAndLevelState=function(e){if(!this._accMode){return}var t=e.getDomRefs(true);var a=t.row.find(".sapUiTableTreeIcon");t.row.not(t.rowHeaderPart).not(t.rowActionPart).attr({"aria-expanded":e.isExpandable()?e.isExpanded()+"":null,"aria-level":e.getLevel()});if(a){a.attr(u.getAriaAttributesFor(this,c.ELEMENTTYPES.TREEICON,{row:e}))}};c.prototype.updateAriaStateOfRowHighlight=function(e){if(!this._accMode||!e){return}var t=e._getRow();var a=t?t.getDomRef("highlighttext"):null;if(a){a.innerText=e._getHighlightText()}};c.prototype._updateAriaStateOfNavigatedRow=function(e){if(!this._accMode||!e){return}var t=e._getRow();var a=e.getNavigated();t.getDomRefs(true).row.attr("aria-current",a?true:null)};c.prototype.updateAriaStateForOverlayAndNoData=function(){var e=this.getTable();if(!e||!e.getDomRef()||!this._accMode){return}if(e.getShowOverlay()){e.$().find("[data-sap-ui-table-acc-covered*='overlay']").attr("aria-hidden","true")}else{e.$().find("[data-sap-ui-table-acc-covered*='overlay']").removeAttr("aria-hidden");if(a.isNoDataVisible(e)){e.$().find("[data-sap-ui-table-acc-covered*='nodata']").attr("aria-hidden","true")}else{e.$().find("[data-sap-ui-table-acc-covered*='nodata']").removeAttr("aria-hidden")}}};c.prototype.getKeyboardTexts=function(){var e=this.getTable().getSelectionMode();var t={rowSelect:"",rowDeselect:""};if(e===l.None){return t}t.rowSelect=a.getResourceText("TBL_ROW_SELECT_KEY");t.rowDeselect=a.getResourceText("TBL_ROW_DESELECT_KEY");return t};c.prototype.setSelectAllState=function(e){var t=this.getTable();if(this._accMode&&t){t.$("selall").attr("aria-checked",e?"true":"false")}};c.prototype.addColumnHeaderLabel=function(e,t){var a=this.getTable();if(!this._accMode||!t.getAriaLabelledBy||!a){return}var i=a.getColumnHeaderVisible()?e.getId():null;if(!i){var r=e.getAggregation("label");if(r){i=r.getId()}}var o=t.getAriaLabelledBy();if(i&&o.indexOf(i)<0){t.addAriaLabelledBy(i)}};return c});
//# sourceMappingURL=Accessibility.js.map