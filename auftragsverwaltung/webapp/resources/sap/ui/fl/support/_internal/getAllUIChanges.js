/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/ComponentRegistry","sap/ui/fl/apply/_internal/flexState/changes/UIChangesState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/Utils"],function(t,e,n,i,r){"use strict";function a(t){const e=t.oContainer.getComponentInstance();const r=i.getFlexReferenceForControl(e);return n.getAllUIChanges(r)}return function(){return r.getUShellService("AppLifeCycle").then(function(n){if(n){const e=n.getCurrentApplication();if(e.componentInstance){return a(e.componentInstance)}return e.getIntent().then(function(e){var n=document.getElementById(`application-${e.semanticObject}-${e.action}`);if(!n){t.error("the iFrame in the cFLP scenario could not be determined");return undefined}return n.contentWindow.eval(""+"\t\t\t\t\t\t\tnew Promise(function (resolve) {"+"\t\t\t\t\t\t\t\tsap.ui.require(["+'\t\t\t\t\t\t\t\t\t"sap/ui/fl/apply/_internal/flexState/ManifestUtils",'+'\t\t\t\t\t\t\t\t\t"sap/ui/fl/Utils",'+'\t\t\t\t\t\t\t\t\t"sap/ui/fl/apply/_internal/flexState/changes/UIChangesState"'+"\t\t\t\t\t\t\t\t], function ("+"\t\t\t\t\t\t\t\t\tManifestUtils,"+"\t\t\t\t\t\t\t\t\tUtils,"+"\t\t\t\t\t\t\t\t\tUIChangesState"+"\t\t\t\t\t\t\t\t) {"+'\t\t\t\t\t\t\t\t\tUtils.getUShellService("AppLifeCycle").then(function (oAppLifeCycleService) {'+"\t\t\t\t\t\t\t\t\t\treturn oAppLifeCycleService.getCurrentApplication().componentInstance;"+"\t\t\t\t\t\t\t\t\t}).then(function (oCurrentAppContainerObject) {"+"\t\t\t\t\t\t\t\t\t\tif (oCurrentAppContainerObject) {"+"\t\t\t\t\t\t\t\t\t\t\tconst sReference = ManifestUtils.getFlexReferenceForControl(oAppComponent);"+"\t\t\t\t\t\t\t\t\t\t\tresolve(return UIChangesState.getAllUIChanges(sReference));"+"\t\t\t\t\t\t\t\t\t\t};"+"\t\t\t\t\t\t\t\t});"+"\t\t\t\t\t\t\t});"+"\t\t\t\t\t\t});")})}const i=e.filter(function(t){return t.getManifestObject().getRawJson()["sap.app"].type==="application"});if(i.length===1){return a(i[0])}return undefined})}});
//# sourceMappingURL=getAllUIChanges.js.map