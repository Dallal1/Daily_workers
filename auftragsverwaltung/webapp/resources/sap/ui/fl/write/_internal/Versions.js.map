{"version":3,"file":"Versions.js","names":["sap","ui","define","ChangePersistenceFactory","Version","FlexInfoSession","Settings","Storage","JSONModel","BindingMode","_mInstances","MODEL_SIZE_LIMIT","BACKEND_REQUEST_LIMIT","createModel","mPropertyBag","oModel","_prepareVersionsModel","setDefaultBindingMode","OneWay","setSizeLimit","setDirtyChanges","bDirtyChanges","setProperty","updateDraftVersion","updateBindings","aVersions","getProperty","bVersioningEnabled","bBackendDraft","bDraftAvailable","Number","Draft","_doesDraftExistInVersions","splice","version","type","Type","filenames","isPublished","shift","bActivateEnabled","sPersistedBasisForDisplayedVersion","bPublishVersionEnabled","sActiveVersion","Original","versions","oVersionsModel","versionsModel","aDraftFilenames","length","forEach","oVersion","Active","Inactive","versioningEnabled","oFlexInfoSession","getByReference","reference","publishVersionEnabled","backendDraft","dirtyChanges","draftAvailable","activateEnabled","activeVersion","persistedVersion","displayedVersion","draftFilenames","_removeDirtyChanges","oDirtyChangeInfo","aDirtyChanges","aChangePersistences","changePersistences","oChangePersistence","getDirtyChanges","concat","deleteChanges","_getDirtyChangesInfo","oDirtyChangesInfo","dirtyChangesExist","oChangePersistenceForAppDescriptorChanges","getChangePersistenceForComponent","push","nonNormalizedReference","some","_updateVersionModelWhenDiscardOrActivate","iNewVersion","Versions","initialize","sReference","sLayer","layer","limit","getInstance","then","oSettings","bVersionsEnabled","isVersioningEnabled","aVersionsPromise","load","Promise","resolve","getVersionsModel","hasVersionsModel","Error","clearInstances","updateModelFromBackend","undefined","onAllChangesSaved","contextBasedAdaptation","activate","bDraftExists","reject","bDirtyChangesExists","oVersionEntry","discardDraft","bBackendDraftExists","oDiscardPromise","bDirtyChangesRemoved","backendChangesDiscarded","dirtyChangesDiscarded","publish","sMessage","bIsPublishedOrOlderVersion"],"sources":["Versions-dbg.js"],"mappings":"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"}