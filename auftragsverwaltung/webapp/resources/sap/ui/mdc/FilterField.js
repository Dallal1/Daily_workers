/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enums/FieldDisplay","sap/base/util/merge","sap/base/util/deepEqual"],(t,e,r,i,o,p)=>{"use strict";const n=e.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null},propertyKey:{type:"string",group:"Data",defaultValue:""},additionalDataType:{type:"object",group:"Data",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:r});n.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["operators","propertyKey","additionalDataType"]})};n.prototype.exit=function(){e.prototype.exit.apply(this,arguments)};n.prototype.getPropertyKey=function(){let t=this.getProperty("propertyKey");if(!t){t=this.getFieldPath()}return t};n.prototype.setProperty=function(t,r,i){if(t==="conditions"&&this.isInvalidInput()&&p(this.getConditions(),this.validateProperty(t,r))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this.resetInvalidInput()}return e.prototype.setProperty.apply(this,arguments)};n.prototype.observeChanges=function(t){e.prototype.observeChanges.apply(this,arguments);if(t.name==="operators"){if(t.current.length===0){e.prototype.getSupportedOperators.apply(this,[])}else{this.setProperty("_operators",t.current,true)}this.updateInternalContent()}else if(t.name==="propertyKey"){this.updateInternalContent()}else if(t.name==="additionalDataType"){a.call(this,t.current)}};n.prototype.fireChangeEvent=function(t,e,r,i){let p;if(t){if(e){if(t.length==1){p=t[0].values[0]}}else{p=r}}this.fireChange({value:p,valid:e,conditions:o([],t),promise:i})};n.prototype.getSupportedOperators=function(){let t=this.getOperators();if(t.length===0){t=e.prototype.getSupportedOperators.apply(this,arguments)}else{this.setProperty("_operators",t,true)}return t};n.prototype.setOperators=function(t){const e=[];if(!Array.isArray(t)){t=t.split(",")}t.forEach(t=>{if(typeof t==="string"){e.push(t)}else{e.push(t.name)}});this.setProperty("operators",e);return this};n.prototype.addOperator=function(t){const e=this.getSupportedOperators();let r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)<0){e.push(r);this.setOperators(e)}return this};n.prototype.addOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(t=>{this.addOperator(t)});return this};n.prototype.removeOperator=function(t){const e=this.getSupportedOperators();let r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)>-1){e.splice(e.indexOf(r),1);this.setOperators(e)}};n.prototype.removeOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(t=>{this.removeOperator(t)})};n.prototype.removeAllOperators=function(){this.setOperators([])};n.prototype.setDefaultOperator=function(t){let e=t;if(t&&typeof t!=="string"){e=t.name}this.setProperty("defaultOperator",e);return this};n.prototype.checkCreateInternalContent=function(){if(!this.isFieldDestroyed()&&!this.isPropertyInitial("dataType")){const r=this._getValueHelp();const o=t.getElementById(r);const p=this.getBindingInfo("conditions");const n=this.getBinding("conditions");if(this.getDisplay()!==i.Value&&r&&(!o||p&&!n)){return}e.prototype.checkCreateInternalContent.apply(this,arguments)}};n.prototype.handleModelContextChange=function(t){e.prototype.handleModelContextChange.apply(this,arguments);if(this.getCurrentContent().length===0){this.triggerCheckCreateInternalContent()}};n.prototype.isSearchField=function(){if(this.isPropertyInitial("propertyKey")){return e.prototype.isSearchField.apply(this,arguments)}else{const t=this.getPropertyKey();const e=new RegExp("^\\*(.*)\\*|\\$search$");return e.test(t)&&this.getMaxConditions()===1}};function a(t){if(!t){this.getContentFactory().setAdditionalDataType()}else if(t.isA&&t.isA("sap.ui.model.Type")){this.getContentFactory().setAdditionalDataType(t)}else if(t.name){this.getContentFactory().setAdditionalDataType()}else{throw new Error("invalid type configuration")}}n.prototype.getAdditionalDataTypeConfiguration=function(){return this.getAdditionalDataType()};return n});
//# sourceMappingURL=FilterField.js.map