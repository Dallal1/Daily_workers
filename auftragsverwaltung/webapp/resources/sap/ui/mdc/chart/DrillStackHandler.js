/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log","sap/m/IllustratedMessage","sap/m/SearchField","sap/ui/core/Lib","sap/ui/model/json/JSONModel","sap/ui/model/Filter"],(e,t,n,o,s,i,r,a,l,c,d,m,p)=>{"use strict";const{PlacementType:g}=i;const{ListMode:u}=i;function D(e){const t=e.getControlDelegate().getDrillStack(e);const n=[];t.forEach(e=>{e.dimension.forEach(e=>{if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}const h=function(){};h.createDrillDownPopover=function(n){let a=null;const m=d.getResourceBundleFor("sap.ui.mdc");const D=new c({placeholder:m.getText("chart.CHART_DRILLDOWN_SEARCH"),liveChange:function(e){if(!a){return}const t=e.getParameter("newValue");let n=[];if(t){n=new p("text","Contains",t)}a.getBinding("items").filter(n)}});const h=new e({id:n.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:g.VerticalPreferredBottom,afterClose:function(){h.destroy()}});if(!r.system.phone){h.setSubHeader(D)}else{h.addContent(D)}const f=new o({title:"{$ChartDrilldown>text}"});a=new t({noData:new l({enableVerticalResponsiveness:true,title:m.getText("chart.NO_DRILLABLE_DIMENSION"),description:m.getText("chart.NO_DRILLABLE_DIMENSION_DESC"),illustrationType:i.IllustratedMessageType.NoDimensionsSet}),mode:u.SingleSelectMaster,items:{path:"$ChartDrilldown>/items",template:f},selectionChange:function(e){const t=e.getParameter("listItem");if(t){const e=t.getBindingContext("$ChartDrilldown");const o=e.getObject().id;n.getEngine().createChanges({control:n,key:"Item",state:[{name:o,position:n.getItems().length}]})}h.close()}});if(r.system.desktop){const e=new s({text:m.getText("chart.CHART_DRILLDOWN_TITLE")});h.setShowHeader(false);h.addContent(e);h.addAriaLabelledBy(e)}else{h.setTitle(m.getText("chart.CHART_DRILLDOWN_TITLE"))}h.addContent(a);n._oDrillDownPopover=h;return h};h.showDrillDownPopover=function(e,t){const n=e.getControlDelegate().getSortedDimensions(e);return n.then(n=>{const o=e._oDrillDownPopover;const s=D(e);n=n.filter(e=>s.indexOf(e.name)<0);const i={items:[]};n.forEach(e=>{i.items.push({text:e.label,id:e.name})});o.setModel(new m(i),"$ChartDrilldown");if(i.items.length<7){const e=o.getSubHeader()||o.getContent()[0];e.setVisible(false)}return new Promise((e,n)=>{o.attachEventOnce("afterOpen",t=>{e(o)});o.openBy(t)})})};return h});
//# sourceMappingURL=DrillStackHandler.js.map