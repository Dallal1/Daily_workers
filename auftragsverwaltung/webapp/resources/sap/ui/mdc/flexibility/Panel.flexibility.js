/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/fl/changeHandler/Base","./ItemBaseFlex"],(e,t,n)=>{"use strict";const r=Object.assign({},n);r.findItem=function(t,n,r){return Promise.resolve(e.getElementById(r))};return{createChanges:function(t,n){const r=n.filter(t=>!e.getElementById(t.id));const o={};return r.reduce((e,t)=>{if(!o[t.id]){o[t.id]=true;e.push(t)}return e},[]).map(e=>({selectorElement:t,changeSpecificData:{changeType:"createItem",content:{selector:e.id}}}))},createItem:{layers:{USER:true},changeHandler:{applyChange:function(e,t,n){const r=e.getContent().selector;return Promise.resolve().then(()=>{t.getModel();return n.modifier.getProperty(t,"metadataHelperPath")}).then(e=>new Promise((t,n)=>{sap.ui.require(["sap/ui/mdc/link/PanelItem",e],(e,n)=>{t(n)},e=>{n(e)})})).then(e=>{const o=n.modifier;if(o.bySelector(r,n.appComponent,n.view)){return undefined}const i=e.retrieveAllMetadata(t);let s;const c=function(e,t){let n=-1;t.some((t,r)=>{if(t.getId()===e){n=r;return true}});return n};const a=o.getControlIdBySelector(r,n.appComponent);return Promise.resolve().then(o.getAggregation.bind(o,t,"items")).then(e=>{s=-1;let t=null;i.some(n=>{const r=c(n.id,e);if(r>-1){s=r}if(n.id===a){t=n;return true}});if(!t){return undefined}return o.createControl("sap.ui.mdc.link.PanelItem",n.appComponent,n.view,t.id,{text:t.text,description:t.description,href:t.href,target:t.target,icon:t.icon,visible:false})}).then(e=>o.insertAggregation(t,"items",e,s+1))})},revertChange:function(e,n,r){const o=r.modifier;if(e.getContent()&&e.getContent().selector){const i=e.getContent().selector.id;const s=o.bySelector(i,r.appComponent,r.view);if(!s){return t.markAsNotApplicable("revertChange of createItem: the item with id "+i+" is not existing and therefore can not be removed.",true)}return Promise.resolve().then(o.removeAggregation.bind(o,n,"items",s))}},completeChangeContent:function(e,t,n){if(t.content){const r=n.modifier.getSelector(t.content.selector,n.appComponent);e.setContent({selector:r})}}}}}},true);
//# sourceMappingURL=Panel.flexibility.js.map