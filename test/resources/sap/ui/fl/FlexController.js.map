{"version":3,"file":"FlexController.js","names":["sap","ui","define","Utils","Layer","ChangePersistenceFactory","Versions","Applier","Reverter","URLHandler","States","FlexState","ControlVariantApplyAPI","JsControlTreeModifier","Element","Log","revertChangesAndUpdateVariantModel","oComponent","bSkipUrlUpdate","aChanges","Promise","resolve","then","length","reverse","revertMultipleChanges","appComponent","modifier","flexController","this","undefined","bind","oModel","getModel","getVariantModelName","update","parameters","updateURL","updateHashEntry","model","FlexController","sComponentName","_oChangePersistence","_sComponentName","getChangePersistenceForComponent","prototype","setVariantSwitchPromise","oPromise","_oVariantSwitchPromise","waitForVariantSwitch","checkDependencies","oChange","mDependencies","mChanges","oAppComponent","aRelevantChanges","bResult","canChangePotentiallyBeApplied","push","sDependencyKey","getId","aDependentChanges","dependencies","i","n","oDependentChange","getChangeFromChangesMap","aSelectors","getDependentControlSelectorList","getSelector","some","oSelector","bySelector","waitForChangesToBeApplied","aPromises","map","mSelector","_waitForChangesToBeApplied","all","async","mPropertyBag","filterChanges","isCurrentProcessFinished","changeTypes","includes","getChangeType","oControl","selector","id","getElementById","getAppComponentForControl","initialize","componentId","mChangesMap","getDependencyMapForComponent","Object","assign","aChangesForControl","aNotYetProcessedChanges","filter","forEach","indexOf","concat","addChangeProcessingPromises","_removeOtherLayerChanges","sLayer","bRemoveOtherLayerChanges","aLayersToReset","values","sLayerToCheck","removeDirtyChanges","saveAll","bSkipUpdateCache","bDraft","bCondenseAnyLayer","sParentVersion","aDraftFilenames","oVersionModel","getVersionsModel","reference","layer","CUSTOMER","getProperty","saveDirtyChanges","oResult","response","vChangeDefinition","Array","isArray","change","fileName","onAllChangesSaved","draftFilenames","resetChanges","sGenerator","aSelectorIds","aChangeTypes","vLayer","applyVariantChanges","reduce","oPreviousPromise","_addRunTimeCreatedChangeToDependencyMap","applyChangeOnControl","error","FakePromise","saveSequenceOfDirtyChanges","aDirtyChanges","getDirtyChanges","oResponse","aFilenames","oChangeJson","oDirtyChange","setState","LifecycleState","PERSISTED","getFlexObjectsDataSelector","checkUpdate"],"sources":["FlexController-dbg.js"],"mappings":"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"}