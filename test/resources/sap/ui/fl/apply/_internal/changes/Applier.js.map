{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","formatMessage","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","UIChangesState","FlUtils","oLastPromise","FakePromise","Promise","resolve","formatAndLogMessage","sLogType","aMessageComponents","aValuesToInsert","sCallStack","sLogMessage","join","checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","reject","Error","checkFailedSelectors","indexOfObject","failedSelectors","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","oDependentControlSelector","oDependentControl","bySelector","isXmlModifier","targets","checkAndAdjustChangeStatus","oOriginalControl","getControlIfTemplateAffected","control","oModifier","bHasAppliedCustomData","getAppliedCustomDataValue","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","copyDependenciesFromCompleteDependencyMap","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","checkPreconditions","sErrorMessage","getJsOnly","handleAfterApply","mControl","oInitializedControl","updateAggregation","originalControl","getContent","boundAggregation","undefined","addAppliedCustomData","oResult","success","handleAfterApplyError","oError","bXmlModifier","error","sChangeId","getId","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oAppComponent","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","oPromise","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","sReference","oDependencyMap","getLiveDependencyMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","bind","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn","getDependentSelectorList"],"sources":["Applier-dbg.js"],"mappings":"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"}