/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger"],function(e,a,t,n){"use strict";function r(e,a){e[a]||={byId:{},variants:[],nonPersistedVariants:[],changes:[],defaultVariants:[],standardVariantChange:undefined,standardVariant:undefined};return e[a]}function s(e,a,t,s,i){s||=[];var d=r(e,t);d.controlId=i;d.nonPersistedVariants.forEach(function(e){delete d.byId[e.getId()]});d.nonPersistedVariants=s.map(function(e){var r=Object.assign({id:e.id,persisted:false},e);r=n.createVariant(t,r,a);d.byId[e.id]=r;return r});return d}function i(n,s,i,d){var c=n[s].map(function(n){var r;if(s==="variants"){r=e.createCompVariant(n,d)}else{r=e.createFromFileContent(n,t)}r.setState(a.LifecycleState.PERSISTED);return r});c.forEach(function(e){var a=e.getPersistencyKey?e.getPersistencyKey():e.getSelector().persistencyKey;r(i,a).byId[e.getId()]=e;switch(s){case"standardVariants":r(i,a).standardVariantChange=e;break;default:r(i,a)[s].push(e)}})}return function(e){var a={};a._getOrCreate=r.bind(undefined,a);a._initialize=s.bind(undefined,a,e.storageResponse.authors);if(e.storageResponse.changes.comp){["variants","changes","defaultVariants","standardVariants"].forEach(function(t){i(e.storageResponse.changes.comp,t,a,e.storageResponse.authors)})}return a}});
//# sourceMappingURL=prepareCompVariantsMap.js.map