{"version":3,"file":"VariantManagementState.js","names":["sap","ui","define","_omit","_pick","ObjectPath","JsControlTreeModifier","VariantsApplyUtil","DependencyHandler","DataSelector","States","FlexState","LayerUtils","Utils","VariantManagementState","mCurrentVariantReferences","getInitialCurrentVariant","sReference","aCtrlVariantManagementChanges","aVariants","oComponentData","getComponentData","aVariantReferencesFromUrl","get","VARIANT_TECHNICAL_PARAMETER","aVariantKeys","filter","oVariant","visible","map","key","sDesiredSelectedVariantId","find","sVariantKey","includes","reverse","oVariantManagementChange","getContent","defaultVariant","sDesiredDefaultVariantKey","createVariantManagement","aFlexObjects","sVMReference","sCurrentVariantReference","currentVariant","variants","variantManagementChanges","oFlexObject","getFileType","getSelector","id","findVariantInFlexObjects","sId","getId","getAllReferencedVariantIds","oCurrentVariant","oFoundVariant","getVariantReference","push","createVariantEntry","oVariantInstance","instance","variantChanges","controlChanges","bCorrectFlexObjectType","isA","bOwnControlChange","aReferencedVariantIds","bControlChangeOfReferencedVariant","indexOf","bLowerLayerChange","compareAgainstCurrentLayer","getLayer","title","getName","layer","favorite","getFavorite","executeOnSelect","getExecuteOnSelection","getVisible","author","getAuthor","contexts","getContexts","isStandardVariant","getStandardVariant","applyVariantChange","oVariantEntry","oVariantChange","getChangeType","getText","Error","applyVariantManagementChange","oVariantManagementEntry","sDesiredDefaultVariant","forEach","createVariantsMap","getFlexObjectMetadata","reference","oVariantManagementsMap","getVariantManagementReference","findVariant","Object","keys","oVariantManagement","some","sCurrentVariant","set","sort","oVariant1","oVariant2","toLowerCase","aCurrentVariantChanges","modified","oChange","isPersisted","getSavedToVariant","oVariantsMap","values","oVariantsMapEntry","oVariantManagementMapDataSelector","parentDataSelector","getFlexObjectsDataSelector","executeFunction","checkInvalidation","mParameters","oUpdateInfo","type","aRelevantFlexObjectTypes","bRelevantType","aRelevantVariantFileTypes","bRelevantVariantType","updatedObject","bHasVariantReference","oVariantManagementsDataSelector","parameterKey","variantManagementReference","oVariantsDataSelector","variantReference","oUIChangesDependencyMapDataSelector","aAllUIChanges","entries","sVariantManagementReference","concat","getControlChangesForVariant","vmReference","vReference","oDependencyMap","createEmptyDependencyMap","sComponentId","getComponentIdForReference","addChangeAndUpdateDependencies","bRelevantFlexObjectType","aCurrentVariants","oVariantDependentFlexObjectsDataSelector","sVariantReference","bVariantRelatedChange","getDependencyMap","getVariantDependentFlexObjects","resetCurrentVariantReference","checkUpdate","getVariantManagementMap","addRuntimeSteadyObject","clearRuntimeSteadyObjects","mPropertyBag","aResult","getVariant","includeDirtyChanges","getState","LifecycleState","PERSISTED","getVariantChangesForVariant","sVReference","getCurrentVariantReference","oVariantManagementSection","getVariantManagementReferences","getAllVariants","reduce","aPrev","sCurr","getInitialChanges","aInitialChanges","mArguments","assign","filterHiddenFlexObjects","oVariantManagementState","aHiddenVariants","oFilteredFlexObject","ctrl_variant","getVariantId","ctrl_variant_change","change","setCurrentVariant","newVReference","waitForInitialVariantChanges","aControls","aCurrentControls","oSelector","oControl","bySelector","appComponent","indexOfObject","selector","length","flexController","waitForChangesToBeApplied","Promise","resolve"],"sources":["VariantManagementState-dbg.js"],"mappings":"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"}