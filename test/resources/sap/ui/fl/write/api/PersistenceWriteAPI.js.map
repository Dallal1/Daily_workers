{"version":3,"file":"PersistenceWriteAPI.js","names":["sap","ui","define","_omit","Log","JsControlTreeModifier","FlexCustomData","DescriptorChangeTypes","ManifestUtils","Settings","Condenser","FlexObjectState","Storage","FeaturesAPI","FlexInfoSession","ChangePersistenceFactory","FlexControllerFactory","Layer","LayerUtils","Utils","PersistenceWriteAPI","isDescriptorChange","oChange","_getMap","getChangeTypes","includes","changeType","getChangeType","hasChanges","mPropertyBag","includeCtrlVariants","invalidateCache","_getUIChanges","then","aChanges","length","hasDirtyChanges","hasDirtyFlexObjects","hasHigherLayerChanges","upToLayer","getCurrentLayer","getFlexObjects","aFlexObjects","filter","oFlexObject","isOverLayer","getLayer","aFilteredFlexObjects","filterHiddenFlexObjects","reference","save","sReference","getFlexReferenceForControl","selector","oFlexInfoSession","getByReference","saveChangeKeepSession","setByReference","saveFlexObjects","getResetAndPublishInfo","oResult","Object","assign","Promise","all","isPublishAvailable","aResetPublishInfo","bHasChanges","bIsPublishAvailable","bIsLayerTransportable","layer","USER","PUBLIC","oFlexInfo","isResetEnabled","isPublishEnabled","allContextsProvided","getFlexInfo","oResponse","undefined","catch","oError","error","message","getResetAndPublishInfoFromSession","oControl","sParameter","JSON","parse","window","sessionStorage","getItem","reset","oAppComponent","getAppComponentForSelector","oFlexController","createForSelector","resetChanges","generator","selectorIds","changeTypes","publish","styleClass","getChangePersistenceForControl","transportAllUIChanges","appVariantDescriptors","add","sFlexReference","getFlexReferenceForSelector","oChangePersistence","getChangePersistenceForComponent","addSingleFlexObject","store","addChange","change","flexObjects","Error","bHasDescriptorChanges","some","map","addChanges","remove","resolve","reject","getId","destroyAppliedCustomData","oElement","bySelector","getSelector","deleteChange","forEach","deleteChanges","getChangesWarning","this","bHasChangesFromOtherSystem","isChangeFromOtherSystem","oSettingsInstance","getInstanceOrUndef","isProductiveSystemWithTransports","bHasNoChanges","oChangesWarning","showWarning","warningType","_condense","changes","Array","isArray","condense","currentLayer","setAdaptationLayer","sLayer","adaptationLayer"],"sources":["PersistenceWriteAPI-dbg.js"],"mappings":"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"}