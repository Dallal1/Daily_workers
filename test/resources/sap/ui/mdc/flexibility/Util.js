/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/util/loadModules","sap/m/p13n/Engine"],(e,n)=>{"use strict";const t={};t.APPLY="apply";t.REVERT="revert";function i(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&!e._bInvalidationSuppressed){e._bInvalidationSuppressed=n.suppressInvalidationFor(e)}}function o(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&e._bInvalidationSuppressed){n.resumeInvalidationFor(e);delete e._bInvalidationSuppressed}}function a(e,t){if(e.isA){n.getInstance().trace(e,{selectorElement:e,changeSpecificData:{changeType:t.getChangeType(),content:t.getContent()}});if(!e._pPendingModification&&e._onModifications instanceof Function){e._pPendingModification=n.getInstance().waitForChanges(e).then(()=>{const t=n.getInstance().getTrace(e);n.getInstance().clearTrace(e);delete e._pPendingModification;o(e);n.getInstance().fireStateChange(e);return e._onModifications(t)})}}}t.getModule=function(e){return new Promise((n,t)=>{sap.ui.require([e],n,t)}).then(e=>e)};t.getMdcResourceText=function(e,n){return t.getModule("sap/ui/core/Lib").then(t=>t.getResourceBundleFor("sap.ui.mdc").getText(e,n))};t.createChangeHandler=function(n){const o=n.apply instanceof Function&&n.apply;const r=n.revert instanceof Function&&n.revert;const c=n.complete instanceof Function&&n.complete;if(!o||!r){throw new Error("Please provide atleast an apply and revert function!")}return{changeHandler:{applyChange:function(e,n,r){i(n);return o(e,n,r,t.APPLY).then(()=>{a(n,e)})},completeChangeContent:function(e,n,t){if(c){c(e,n,t)}},revertChange:function(e,n,o){i(n);return r(e,n,o,t.REVERT).then(()=>{a(n,e)})},onAfterXMLChangeProcessing:function(n,t){return t.modifier.getProperty(n,"delegate").then(i=>{if(i){return e(i.name).then(e=>{const i=e[0];if(i.onAfterXMLChangeProcessing instanceof Function){i.onAfterXMLChangeProcessing(n,t)}})}})},getCondenserInfo:n.getCondenserInfo,getChangeVisualizationInfo:n.getChangeVisualizationInfo},layers:{USER:true}}};return t});
//# sourceMappingURL=Util.js.map