/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/unified/Menu","sap/ui/unified/MenuItem"],function(e,t,n){"use strict";function l(e,t){var n=t.getRowBindingContext();var l=e.getFilterProperty();var o=n.getProperty(l);if(o!=null&&typeof o!=="string"){o=o.toString()}if(this.getEnableCustomFilter()){this.fireCustomFilter({column:e,value:o})}else{this.filter(e,o)}}var o={TableUtils:null,openContextMenu:function(e,t){var n=o.TableUtils.getCell(e,t.target);var l=o.TableUtils.getCellInfo(n);if(l.isOfType(o.TableUtils.CELLTYPE.COLUMNHEADER)){e.getColumns()[l.columnIndex]._openHeaderMenu(l.cell);t.preventDefault()}else if(l.isOfType(o.TableUtils.CELLTYPE.ANYCONTENTCELL)){if(l.columnIndex>=0){var u=o.TableUtils.getRowColCell(e,l.rowIndex,l.columnIndex,true);var C=e.fireCellContextmenu({rowIndex:u.row.getIndex(),columnIndex:l.columnIndex,columnId:u.column.getId(),cellControl:u.cell,rowBindingContext:u.row.getRowBindingContext(),cellDomRef:l.cell});if(!C){t.preventDefault()}}o._openContentCellContextMenu(e,l,t)}},_openContentCellContextMenu:function(e,t,n){var l=e.getRows()[t.rowIndex];if(l.isEmpty()){return}if(e.getContextMenu()){o._openCustomContentCellContextMenu(e,t,n)}else{o._openDefaultContentCellContextMenu(e,t,n)}},_openCustomContentCellContextMenu:function(e,t,n){var l=e.getRows()[t.rowIndex];var o=e.getContextMenu();if(l.isGroupHeader()||l.isSummary()){return}o.setBindingContext(l.getRowBindingContext(),e.getBindingInfo("rows").model);var u=e.fireBeforeOpenContextMenu({rowIndex:l.getIndex(),columnIndex:t.columnIndex>=0?t.columnIndex:null,contextMenu:o});if(u){e.getContextMenu()?.openAsContextMenu(n,t.cell);n.preventDefault()}},_openDefaultContentCellContextMenu:function(u,C,i){var r=C.rowIndex;var x=u.getRows()[r];var s=u.getColumns()[C.columnIndex];if(!u._oCellContextMenu){u._oCellContextMenu=new t(u.getId()+"-cellcontextmenu")}var a=u._oCellContextMenu.getId()+"-cellfilter";var c=e.getElementById(a);if(u.getEnableCellFilter()&&s&&s.isFilterableByMenu()&&!x.isGroupHeader()){if(!c){c=new n({id:a,text:o.TableUtils.getResourceText("TBL_FILTER")});c._onSelect=l.bind(u,s,x);c.attachSelect(c._onSelect)}else{c.detachSelect(c._onSelect);c._onSelect=l.bind(u,s,x);c.attachSelect(c._onSelect)}u._oCellContextMenu.insertItem(c,0)}else{u._oCellContextMenu.removeItem(c)}o.TableUtils.Hook.call(u,o.TableUtils.Hook.Keys.Table.OpenMenu,C,u._oCellContextMenu);if(u._oCellContextMenu.getItems().length===0){return}u._oCellContextMenu.openAsContextMenu(i,C.cell);i.preventDefault()},closeContentCellContextMenu:function(e){o._closeCustomContentCellContextMenu(e);o._closeDefaultContentCellContextMenu(e)},_closeCustomContentCellContextMenu:function(e){e.getContextMenu()?.close?.()},_closeDefaultContentCellContextMenu:function(e){e._oCellContextMenu?.close()},cleanupDefaultContentCellContextMenu:function(t){if(!t._oCellContextMenu){return}var n=t._oCellContextMenu.getId()+"-cellfilter";e.getElementById(n)?.destroy();t._oCellContextMenu.removeAllItems();t._oCellContextMenu.destroy();delete t._oCellContextMenu}};return o},true);
//# sourceMappingURL=_MenuUtils.js.map